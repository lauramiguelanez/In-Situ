{"version":3,"sources":["components/Navbar.js","components/auth/AuthService.js","components/auth/Signup.js","components/auth/Login.js","lib/DeviceOrientationControls.js","lib/CSS3DRenderer.js","components/3dSpace/CSS3elementsPREV.js","components/3dSpace/Scope.js","components/ScopeView.js","components/maps/geolocalize.js","components/upload/UploadSpace.js","components/upload/UploadMediaImg.js","components/3dSpace/CSS3elements.js","components/Camera.js","components/3dSpace/ScopeCamera.js","components/3dSpace/ScopeCameraID.js","components/upload/UploadMediaVideo.js","components/BottomMenu.js","components/Profile.js","components/ProfileID.js","components/3dSpace/ScopeID.js","App.js","serviceWorker.js","index.js"],"names":["Navbar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleLogout","e","logout","state","loggedInUser","nextProps","setState","objectSpread","react_default","a","createElement","className","onClick","Link","to","username","role","aria-label","Component","require","config","AuthService","signup","password","service","post","then","response","data","login","loggedin","get","catch","err","console","error","log","axios","create","baseURL","concat","process","withCredentials","Signup","handleFormSubmit","event","preventDefault","getUser","user","handleChange","_event$target","target","name","value","defineProperty","_this2","class","onSubmit","type","onChange","Login","redirect","Redirect","THREE","DeviceOrientationControls","object","scope","rotation","reorder","enabled","deviceOrientation","screenOrientation","alphaOffset","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","window","orientation","setObjectQuaternion","zee","Vector3","euler","Euler","q0","Quaternion","q1","Math","sqrt","quaternion","alpha","beta","gamma","orient","set","setFromEuler","multiply","setFromAxisAngle","connect","addEventListener","disconnect","removeEventListener","update","eyeAngle","device","screen","width","degToRad","dispose","CSS3DRenderer","_width","_height","_widthHalf","_heightHalf","REVISION","matrix","Matrix4","cache","camera","fov","style","objects","WeakMap","domElement","document","overflow","cameraElement","WebkitTransformStyle","transformStyle","appendChild","isIE","test","navigator","userAgent","epsilon","abs","getCameraCSSMatrix","elements","getObjectCSSMatrix","cameraCSSMatrix","matrix3d","getSize","height","setSize","getDistanceToSquared","b","object1","object2","setFromMatrixPosition","matrixWorld","distanceToSquared","zOrder","scene","sorted","result","traverse","CSS3DObject","push","filterAndFlatten","sort","distanceToCameraSquared","zMax","length","i","l","element","zIndex","render","projectionMatrix","isPerspectiveCamera","WebkitPerspective","perspective","updateMatrixWorld","parent","isOrthographicCamera","matrixWorldInverse","WebkitTransform","transform","renderObject","CSS3DSprite","copy","transpose","copyPosition","scale","cachedStyle","undefined","objectData","parentNode","children","Object3D","position","removeChild","prototype","constructor","iframeElement","ytID","x","y","z","ry","div","backgroundColor","iframe","border","url","join","src","imageElement","image","CSS3elementsPREV","spaceRadius","media","radius","many","angle","PI","group","Group","forEach","cos","sin","rot","newImage","add","newIFrame","Scope","_React$Component","getImage","id","space","init","_ref","renderer","sceneCSS","rendererCSS","controls","geometry","loader","crossOrigin","map","load","material","sphere","helperGeometry","helperMaterial","color","wireframe","scopeDiv","getElementById","setPixelRatio","devicePixelRatio","innerWidth","innerHeight","onWindowResize","animate","_this$state","requestAnimationFrame","_this$state2","aspect","updateProjectionMatrix","componentDidMount","componentDidUpdate","prevProps","newId","antialias","inherits","createClass","key","React","ScopeView","_Component","apply","arguments","Scope_Scope","geolocalize","Promise","resolve","reject","geolocation","getCurrentPosition","pos","center","lat","coords","latitude","lng","longitude","UploadSpace","createSpace","image_url","creator","_id","location","sendNewSpace","addSpaceToUser","newSpace","updateCatalog","catalog","catalogId","spaceId","patch","userInSession","file","files","uploadImage","img_url","_this3","formData","FormData","append","headers","Content-Type","img","secure_url","_this4","handleSubmit","UploadMediaImg","createMedia","addMediaToSpace","spaceID","updateSpace","newMedia","currentSpace","isColor","CSS3elements","Camera","cameraStart","cameraView","querySelector","mediaDevices","getUserMedia","constraints","stream","getTracks","srcObject","video","facingMode","audio","autoPlay","playsInline","ScopeCamera","body","Camera_Camera","ScopeCameraID","promises","mediaIDs","mediaID","all","mediaArr","prom","match","params","UploadMediaVideo","youtubeID","placeholder","BottomMenu","Profile","getScopes","spaces","userSpaces","ProfileID","ScopeID","App","getTheUser","userObj","actualizeSpace","spaceLocation","fetchUser","Navbar_Navbar","Switch","Route","exact","path","auth_Signup","auth_Login","ProfileID_ProfileID","Profile_Profile","ScopeID_ScopeID","assign","ScopeView_ScopeView","ScopeCameraID_ScopeCameraID","ScopeCamera_ScopeCamera","UploadSpace_UploadSpace","UploadMediaImg_UploadMediaImg","UploadMediaVideo_UploadMediaVideo","BottomMenu_BottomMenu","Boolean","hostname","ReactDOM","BrowserRouter","src_App_0","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3990cce5.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default class Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] })\n  }\n\n  handleLogout = (e) => {\n    this.props.logout()\n  }\n\n  render() {\n    if (this.state.loggedInUser) {\n      return (\n        <nav className=\"nav-style box\">\n          <ul>\n            <li><a onClick={this.handleLogout}>Logout</a></li>\n            <li><Link to='/'>Home</Link></li>\n            <li><Link to='/profile'>{this.state.loggedInUser.username}</Link></li>\n          </ul>\n        </nav>\n      )\n    } else {\n      return (\n          <nav className=\"navbar nav-style box\" role=\"navigation\" aria-label=\"main navigation\">\n\n            <ul>\n            <li><Link to='/'>Home</Link></li>\n            <li><Link to='/signup'>Signup</Link></li>\n            <li><Link to='/login'>Login</Link></li>\n            </ul>\n          </nav>\n      )\n    }\n  }\n}","// auth/auth-service.js\nimport axios from 'axios';\nrequire('dotenv').config();\n\nclass AuthService {\n  constructor() {\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api/auth`,\n      withCredentials: true\n    });\n  }\n\n  signup = (username, password) => {\n    return this.service.post('/signup', {username, password})\n    .then(response => response.data)\n  }\n\n  login = (username, password) => {\n    return this.service.post('/login', {username, password})\n    .then(response => response.data)\n  }\n\n  loggedin = () => {\n    return this.service.get('/currentuser',)\n    .then(response => response.data)\n    .catch(err => {\n      console.error('Error in getUser', err)\n    })\n  }\n\n  logout = () => {\n    console.log(\"TRYING LOGOUT AT FRONT\");\n    return this.service.get('/logout',)\n    .then(response => response.data)\n  }\n}\n\nexport default AuthService;","// auth/Signup.js\nimport React, { Component } from 'react';\nimport AuthService from './AuthService'\n\nclass Signup extends Component {\n  constructor(props){\n    super(props);\n    this.state = { username: '', password: '' };\n    this.service = new AuthService();\n  }\n    \n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service.signup(username, password)\n    .then( response => {\n        this.setState({\n            username: \"\", \n            password: \"\",\n        });\n        this.props.getUser(response.user)\n    })\n    .catch( error => console.log(error) )\n  }\n\n  handleChange = (event) => {  \n    const {name, value} = event.target;\n    this.setState({[name]: value});\n  }\n      \n\n  render() {\n    return(\n      <div className=\"card box\">\n        <h3 class=\"label is-medium\">Welcome! create your account next:</h3>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"field\">\n            <label className=\"label\">Username:</label>\n            <input className=\"input\" type=\"text\" name=\"username\" value={this.state.username} onChange={ e => this.handleChange(e)}/>\n          </div>\n          \n          <div className=\"field\">\n            <label className=\"label\">Password:</label>\n            <input  className=\"input\" type=\"password\" name=\"password\" value={this.state.password} onChange={ e => this.handleChange(e)} />\n          </div>\n          \n          <input className=\"button is-primary is-rounded\" type=\"submit\" value=\"Sign up\" />\n        </form>\n\n      </div>\n    )\n  }\n}\n\nexport default Signup;","// auth/Signup.js\nimport React, { Component } from \"react\";\nimport { Link, Redirect } from 'react-router-dom';\nimport AuthService from \"./AuthService\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\", redirect: false };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service\n      .login(username, password)\n      .then(response => {\n        this.setState({\n          username: username,\n          password: password,\n          error: false,\n          redirect: true\n        });\n\n        this.props.getUser(response);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n\n    if(this.state.redirect) return <Redirect to=\"/\" />\n\n    return (\n      <div className=\"card box\">\n        <h3 className=\"label is-medium\">Please, login</h3>\n        <form onSubmit={this.handleFormSubmit} >\n\n          <div className=\"field\">\n            <label className=\"label\">Username:</label>\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"username\"\n              value={this.state.username}\n              onChange={e => this.handleChange(e)}\n            />\n          </div>\n\n          <div className=\"field\">\n            <label className=\"label\">Password:</label>\n            <input\n              className=\"input\"\n              type=\"password\"\n              name=\"password\"\n              value={this.state.password}\n              onChange={e => this.handleChange(e)}\n            />\n          </div>\n\n          <input className=\"button is-primary is-rounded\" type=\"submit\" value=\"Login\" />\n\n        </form>\n\n        <h1>{this.state.error ? \"Error\" : \"\"}</h1>\n\n        \n      </div>\n    );\n  }\n}\n\nexport default Login;\n\n","/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\nvar THREE = require('three');\n\nTHREE.DeviceOrientationControls = function ( object ) {\n\tvar scope = this;\n\tthis.object = object;\n\tthis.object.rotation.reorder( 'YXZ' );\n\tthis.enabled = true;\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\tthis.alphaOffset = 0; // radians\n\n\tvar onDeviceOrientationChangeEvent = function ( event ) {\n\n\t\tscope.deviceOrientation = event;\n\t};\n\tvar onScreenOrientationChangeEvent = function () {\n\t\tscope.screenOrientation = window.orientation || 0;\n\t};\n\t// The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\tvar setObjectQuaternion = function () {\n\t\tvar zee = new THREE.Vector3( 0, 0, 1 );\n\t\tvar euler = new THREE.Euler();\n\t\tvar q0 = new THREE.Quaternion();\n\t\tvar q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\t\treturn function ( quaternion, alpha, beta, gamma, orient ) {\n\t\t\teuler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\t\t\tquaternion.setFromEuler( euler ); // orient the device\n\t\t\tquaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\t\t\tquaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\t\t};\n\t}();\n\tthis.connect = function () {\n\t\tonScreenOrientationChangeEvent(); // run once on load\n\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\tscope.enabled = true;\n\t};\n\tthis.disconnect = function () {\n\t\twindow.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\tscope.enabled = false;\n\t};\n\tthis.update = function () {\n\t\tlet eyeAngle;\n\t\tif ( scope.enabled === false ) return;\n\t\tvar device = scope.deviceOrientation;\n\t\tif( window.screen.width <= 740 ) {     \n\t\t\teyeAngle = 0; \n\t\t}else{\n\t\t\teyeAngle = 90;\n\t\t}\n\t\tif ( device ) {\n\t\t\tvar alpha = device.alpha ? THREE.Math.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\t\t\tvar beta = device.beta ? THREE.Math.degToRad( device.beta + eyeAngle) : THREE.Math.degToRad(eyeAngle); // X'\n\t\t\tvar gamma = device.gamma ? THREE.Math.degToRad( device.gamma ) : 0; // Y''\n\t\t\tvar orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O\n\t\t\tsetObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\t\t}\n\t};\n\tthis.dispose = function () {\n\t\tscope.disconnect();\n\t};\n\tthis.connect();\n};\n\nexport default THREE.DeviceOrientationControls;","/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n * @author mrdoob / http://mrdoob.com/\n * @author yomotsu / https://yomotsu.net/\n */\n\nvar THREE = require('three');\n\nTHREE.CSS3DRenderer = function () {\n\n\tconsole.log( 'THREE.CSS3DRenderer', THREE.REVISION );\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar matrix = new THREE.Matrix4();\n\n\tvar cache = {\n\t\tcamera: { fov: 0, style: '' },\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tvar cameraElement = document.createElement( 'div' );\n\n\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\tcameraElement.style.transformStyle = 'preserve-3d';\n\n\tdomElement.appendChild( cameraElement );\n\n\tvar isIE = /Trident/i.test( navigator.userAgent );\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t\tcameraElement.style.width = width + 'px';\n\t\tcameraElement.style.height = height + 'px';\n\n\t};\n\n\tfunction epsilon( value ) {\n\n\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t}\n\n\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\tvar elements = matrix.elements;\n\n\t\treturn 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t}\n\n\tfunction getObjectCSSMatrix( matrix, cameraCSSMatrix ) {\n\n\t\tvar elements = matrix.elements;\n\t\tvar matrix3d = 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t\tif ( isIE ) {\n\n\t\t\treturn 'translate(-50%,-50%)' +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' +\n\t\t\t\tcameraCSSMatrix +\n\t\t\t\tmatrix3d;\n\n\t\t}\n\n\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t}\n\n\tfunction renderObject( object, camera, cameraCSSMatrix ) {\n\n\t\tif ( object instanceof THREE.CSS3DObject ) {\n\n\t\t\tvar style;\n\n\t\t\tif ( object instanceof THREE.CSS3DSprite ) {\n\n\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\n\t\t\t\tmatrix.transpose();\n\t\t\t\tmatrix.copyPosition( object.matrixWorld );\n\t\t\t\tmatrix.scale( object.scale );\n\n\t\t\t\tmatrix.elements[ 3 ] = 0;\n\t\t\t\tmatrix.elements[ 7 ] = 0;\n\t\t\t\tmatrix.elements[ 11 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tstyle = getObjectCSSMatrix( matrix, cameraCSSMatrix );\n\n\t\t\t} else {\n\n\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t\tvar element = object.element;\n\t\t\tvar cachedStyle = cache.objects.get( object );\n\n\t\t\tif ( cachedStyle === undefined || cachedStyle !== style ) {\n\n\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\telement.style.transform = style;\n\n\t\t\t\tvar objectData = { style: style };\n\n\t\t\t\tif ( isIE ) {\n\n\t\t\t\t\tobjectData.distanceToCameraSquared = getDistanceToSquared( camera, object );\n\n\t\t\t\t}\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t}\n\n\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], camera, cameraCSSMatrix );\n\n\t\t}\n\n\t}\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new THREE.Vector3();\n\t\tvar b = new THREE.Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tfunction filterAndFlatten( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.CSS3DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t}\n\n\tfunction zOrder( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\n\t\t\t\tdomElement.style.perspective = fov + 'px';\n\n\t\t\t}\n\n\t\t\tcache.camera.fov = fov;\n\n\t\t}\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tvar cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t'scale(' + fov + ')' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\tvar style = cameraCSSMatrix +\n\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\tif ( cache.camera.style !== style && ! isIE ) {\n\n\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\tcameraElement.style.transform = style;\n\n\t\t\tcache.camera.style = style;\n\n\t\t}\n\n\t\trenderObject( scene, camera, cameraCSSMatrix );\n\n\t\tif ( isIE ) {\n\n\t\t\t// IE10 and 11 does not support 'preserve-3d'.\n\t\t\t// Thus, z-order in 3D will not work.\n\t\t\t// We have to calc z-order manually and set CSS z-index for IE.\n\t\t\t// FYI: z-index can't handle object intersection\n\t\t\tzOrder( scene );\n\n\t\t}\n\n\t};\n\n};\n\n\nexport default THREE.CSS3DRenderer;","var THREE = require('three');\n//import CSS3DObject from \".../lib/CSS3DObject\";\n\n\nvar THREE = require('three');\n\nTHREE.CSS3DObject = function ( element ) {\n\tTHREE.Object3D.call( this );\n\tthis.element = element;\n\tthis.element.style.position = 'absolute';\n\tthis.addEventListener( 'removed', function () {\n\t\tif ( this.element.parentNode !== null ) {\n\t\t\tthis.element.parentNode.removeChild( this.element );\n\t\t}\n\t} );\n};\nTHREE.CSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\nTHREE.CSS3DSprite = function ( element ) {\n\tTHREE.CSS3DObject.call( this, element );\n};\nTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\nlet elementSize = 200;\n\nconst iframeElement = (ytID, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    div.style.width = `${elementSize}px`;\n    //div.style.height = '360px';\n    div.style.backgroundColor = '#000';\n    var iframe = document.createElement( 'iframe' );\n    //iframe.style.width = \"480px\";\n    //iframe.style.height = '360px';\n    iframe.style.border = '0px';\n    let url = [ 'https://www.youtube.com/embed/', ytID, '?rel=0' ].join( '' );\n    iframe.src = url;\n    div.appendChild( iframe );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    console.log(ytID);\n    console.log(url);\n    return object;\n}\nconst imageElement = (url, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    //div.style.width = '50px';\n    //div.style.height = '50px';\n    div.style.backgroundColor = '#000';\n    var image = document.createElement( 'img' );\n    image.style.border = '0px';\n    image.src = url;//\"https://scontent-mad1-1.cdninstagram.com/vp/30f76f820acdb893b9cb648ae0adfd57/5C5FEA68/t51.2885-15/e35/25018699_872711359576719_1019478494217764864_n.jpg\";\n    image.style.width = `${elementSize}px`;\n    image.style.height = 'auto';\n    div.appendChild( image );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    console.log(url);\n    return object;\n}\n\nexport const CSS3elementsPREV = (spaceRadius, media) => {\n    let radius = spaceRadius-50;\n    let many = media.length;\n    let angle = Math.PI * 2 / many;\n    let x,z;\n    let y = 0;//spaceRadius/2;\n    let group = new THREE.Group();\n    media.forEach((e,i) => {\n        let ry = angle * i;\n        x = radius * Math.cos(ry);\n        z = radius * Math.sin(ry);\n        let rot = 3*Math.PI/2 - ry;\n        if (e.type == \"IMAGE\"){\n            let newImage = new imageElement(e.url, x, y, z, rot);\n            //console.log(e);\n            group.add(newImage);\n        } else if (e.type == \"YOUTUBE\"){\n            //console.log(e);\n            let newIFrame = new iframeElement(e.url, x, y, z, rot);\n            group.add(newIFrame);\n        }else {\n            let newIFrame = new iframeElement(e, x, y, z, rot);\n            group.add(newIFrame);\n        }\n    });\n    return group;\n}","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\n//import TrackballControls from \"../../lib/TrackballControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elementsPREV} from \"./CSS3elementsPREV\";\n//import { Camera } from \"../Camera\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\n\nexport class Scope extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer(), \n      id: this.props.id\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  getImage = (id) => {\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        console.log(\"Image from DB \" + space.data);\n        this.setState({ image: space.data.image, media: space.data.media });\n      })\n      .catch(error => console.log(error));\n  };\n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n    /* this.setState({ controls: new TrackballControls(camera) });\n    this.state.controls.rotateSpeed = 1.0;\n    this.state.controls.zoomSpeed = 1.2;\n    this.state.controls.panSpeed = 0.8; */\n    camera.position.set(0, 0, -0.0001); //-0.001\n\n    renderer.domElement.className = \"scope\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    \n    //Helper Geometry\n    var helperGeometry = new THREE.BoxBufferGeometry(100, 100, 100, 4, 4, 4);\n    var helperMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});\n    var helper = new THREE.Mesh(helperGeometry, helperMaterial);\n    //scene.add(helper);\n\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(this.state.media);\n    let group = CSS3elementsPREV (this.state.spaceRadius, this.state.media);\n    sceneCSS.add(group);\n\n    let scopeDiv = document.getElementById(\"scopediv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(renderer.domElement);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(rendererCSS.domElement);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id = this.state.id;\n    //console.log(\"FIRST ID \"+id)\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  componentDidUpdate = prevProps => {\n    if (this.props.id !== prevProps.id) {\n      let newId = this.props.id;\n      this.setState({ id: newId });\n      this.getImage(newId).then(() => {\n        this.init(this.state);\n        this.animate();\n      });\n    }\n  };\n\n  render() {\n    return <div id=\"scopediv\"/>;\n  }\n}\n","import React, { Component } from \"react\";\nimport { Scope } from \"./3dSpace/Scope\";\n\nexport class ScopeView extends Component {\n    render() {\n      return (\n          <div className=\"ScopeView\">\n            <Scope id={this.props.id}/>\n          </div>\n      );\n    }\n  }","const geolocalize = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) reject(\"No geolocation available\");\n    navigator.geolocation.getCurrentPosition(pos => {\n      const center = {\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      };\n      resolve(center);\n    }, reject);\n  });\n};\n\n\nexport default geolocalize;","import React from \"react\";\nimport axios from \"axios\";\nimport geolocalize from \"../maps/geolocalize\";\nrequire('dotenv').config();\n\nexport class UploadSpace extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: this.props.userInSession };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  handleChange(e) {\n    //console.log('handleChange');\n    //console.log('DEBUG e.target.files[0]', e.target.files[0]);\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.uploadImage(this.state.file).then(() => {\n      console.log(\"uploaded image to create space\");\n      console.log(this.state.img_url);\n      geolocalize().then(center => {\n        console.log(center);\n        this.createSpace(this.state.img_url, center);\n      });\n    });\n  }\n\n  uploadImage(file) {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    //console.log(\"DEBUG formData\", formData.get(\"photo\"));\n    return this.service\n      .post(\"/uploadCloud\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      })\n      .then(img => {\n        this.setState({ img_url: img.data.secure_url });\n        //console.log(\"Image from CLOUD\");\n        //console.log(img.data.url);\n      })\n      .catch(error => console.log(error));\n  }\n\n  createSpace = (image_url, center) => {\n    let { lat, lng } = center;\n    console.log(center);\n    let user = this.state.loggedInUser;\n    let space = { image: image_url, creator: user._id, location: center };\n    return this.service\n      .post(\"/spaces\", space)\n      .then(space => {\n        console.log(\"CREATED NEW SPACE:\");\n        console.log(space.data);\n        this.sendNewSpace(space.data);\n        this.addSpaceToUser(space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  sendNewSpace = space => {\n    this.props.newSpace(space._id, space.location);\n  };\n\n  addSpaceToUser = space => {\n    let user = this.state.loggedInUser;\n    console.log(\"ADD TO USER CATALOG\");\n    console.log(space);\n    console.log(user);\n    this.updateCatalog(user.catalog, space._id);\n  };\n\n  updateCatalog = (catalogId, spaceId) => {\n    let newSpace = { spaceId };\n    return this.service\n      .patch(`/catalog/${catalogId}`, newSpace)\n      .then(catalog => {\n        console.log(\"Catalog updated on DB \" + catalog.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"file\">\n\n          <form onSubmit={e => this.handleSubmit(e)}>\n            <label className=\"file-label\">\n              <input className=\"file-input\" type=\"file\" onChange={e => this.handleChange(e)} />\n              <span className=\"file-cta\">\n                <span className=\"file-label\">Choose a panorama</span>\n              </span>\n            </label>\n            <button className=\"button is-primary\" type=\"submit\">Upload a panorama of your space</button>\n          </form>\n\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n\n\n","import React from \"react\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\nexport class UploadMediaImg extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      loggedInUser: this.props.userInSession,\n      spaceID: this.props.currentSpace\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.uploadImage(this.state.file)\n    .then(() => {\n      console.log(\"uploaded image to this space\");\n      console.log(this.state.img_url);\n      this.createMedia(this.state.img_url);\n    });\n  }\n\n  uploadImage(file) {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    //console.log(\"DEBUG formData\", formData.get(\"photo\"));\n    return this.service\n      .post(\"/uploadCloud\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      })\n      .then(img => {\n        this.setState({ img_url: img.data.secure_url });\n      })\n      .catch(error => console.log(error));\n  }\n\n  createMedia = (image_url) => {\n    let media = { url: image_url, type: \"IMAGE\"};\n    return this.service\n      .post(\"/media\", media)\n      .then(media => {\n        console.log(\"CREATED NEW IMAGE:\");\n        console.log(media.data);\n        this.addMediaToSpace(media.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n\n  addMediaToSpace = media => {\n    let spaceID = this.state.spaceID;\n    console.log(\"SPACE ID UPLOAD IMG \"+ spaceID)\n    this.updateSpace(media, spaceID);\n  };\n\n  updateSpace = (media, spaceId) => {\n    let newMedia = media;\n    return this.service\n      .patch(`/spaces/${spaceId}`, newMedia)\n      .then(space => {\n        console.log(\"Space updated on DB \" + space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    console.log(\"SPACE ID UPLOAD IMG \"+ this.state.spaceID)\n    return (\n      <div>\n        <div /* class=\"file is-boxed\" */>\n          <form onSubmit={e => this.handleSubmit(e)}>\n            <input /* className=\"file-input\" */ type=\"file\" onChange={e => this.handleChange(e)} /> <br />\n            <span className=\"file-cta\">\n              <span className=\"file-label\">Choose an image</span>\n            </span>\n            <button type=\"submit\" isColor='primary'>Upload Images to this Scope</button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","var THREE = require('three');\n//import CSS3DObject from \".../lib/CSS3DObject\";\n\n\nvar THREE = require('three');\n\nTHREE.CSS3DObject = function ( element ) {\n\tTHREE.Object3D.call( this );\n\tthis.element = element;\n\tthis.element.style.position = 'absolute';\n\tthis.addEventListener( 'removed', function () {\n\t\tif ( this.element.parentNode !== null ) {\n\t\t\tthis.element.parentNode.removeChild( this.element );\n\t\t}\n\t} );\n};\nTHREE.CSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\nTHREE.CSS3DSprite = function ( element ) {\n\tTHREE.CSS3DObject.call( this, element );\n};\nTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\nlet elementSize = 200;\n\nconst iframeElement = (ytID, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    div.style.width = `${elementSize}px`;\n    //div.style.height = '360px';\n    div.style.backgroundColor = '#000';\n    var iframe = document.createElement( 'iframe' );\n    //iframe.style.width = \"480px\";\n    //iframe.style.height = '360px';\n    iframe.style.border = '0px';\n    //ytID = \"B-DuL2W71W4\";\n    let url = [ 'https://www.youtube.com/embed/', ytID, '?rel=0' ].join( '' );\n    iframe.src = url;\n    div.appendChild( iframe );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    //console.log(ytID);\n    //console.log(url);\n    return object;\n}\nconst imageElement = (url, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    //div.style.width = '50px';\n    //div.style.height = '50px';\n    div.style.backgroundColor = '#000';\n    var image = document.createElement( 'img' );\n    image.style.border = '0px';\n    image.src = url;// */\"https://scontent-mad1-1.cdninstagram.com/vp/30f76f820acdb893b9cb648ae0adfd57/5C5FEA68/t51.2885-15/e35/25018699_872711359576719_1019478494217764864_n.jpg\";\n    image.style.width = `${elementSize}px`;\n    image.style.height = 'auto';\n    div.appendChild( image );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    //console.log(url);\n    return object;\n}\n\nexport const CSS3elements = (spaceRadius, media) => {\n    console.log(\"MEDIA SEND TO CSS ELEMENTS\");\n    console.log(media);\n    let radius = spaceRadius-50;\n    let many = media.length;\n    let angle = Math.PI * 2 / many;\n    let x,z;\n    let y = 0;//spaceRadius/2;\n    let group = new THREE.Group();\n    media.forEach((e,i) => {\n        let ry = angle * i;\n        x = radius * Math.cos(ry);\n        z = radius * Math.sin(ry);\n        let rot = 3*Math.PI/2 - ry;\n        if (e.type == \"IMAGE\"){\n            let newImage = new imageElement(e.url, x, y, z, rot);\n            //console.log(e);\n            group.add(newImage);\n        } else if (e.type == \"YOUTUBE\"){\n            //console.log(e);\n            let newIFrame = new iframeElement(e.url, x, y, z, rot);\n            group.add(newIFrame);\n        }else {\n            console.log(e);\n            let newIFrame = new iframeElement(e, x, y, z, rot);\n            group.add(newIFrame);\n        }\n    });\n    return group;\n}\n\n/* export const CSS3elements = (spaceRadius, data) => {\n    let radius = spaceRadius-50;\n    let many = data.length;\n    let angle = Math.PI * 2 / many;\n    let x,z;\n    let y = 0;//spaceRadius/2;\n    let group = new THREE.Group();\n    data.forEach((e,i) => {\n        let ry = angle * i;\n        x = radius * Math.cos(ry);\n        z = radius * Math.sin(ry);\n        let rot = 3*Math.PI/2 - ry;\n        if(i % 2==0){\n            let newImage = new imageElement(e, x, y, z, rot);\n            group.add(newImage);\n        } else{\n            let newIFrame = new iframeElement(e, x, y, z, rot);\n            group.add(newIFrame);\n        } \n    });\n    return group;\n}  */","import React from \"react\";\n\n//var constraints = { video: { facingMode: \"user\" }, audio: false };\n//const cameraView = document.querySelector(\"#camera--view\");\n//const cameraSensor = document.querySelector(\"#camera--sensor\");\n\nexport class Camera extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      cameraView: document.querySelector(\"#camera--view\"),\n      constraints: { video: { facingMode: \"environment\" }, audio: false }\n    };\n\n    window.addEventListener(\"load\", this.cameraStart, false);\n  }\n\n  cameraStart = () => {\n    let cameraView = document.querySelector(\"#camera--view\");\n    navigator.mediaDevices\n      .getUserMedia(this.state.constraints)\n      .then(function(stream) {\n        let track = stream.getTracks()[0];\n        cameraView.srcObject = stream;\n      })\n      .catch(function(error) {\n        console.error(\"Oops. Something is broken.\", error);\n      });\n  };\n\n  render() {\n    return (\n      <video className=\"camera\"id=\"camera--view\" autoPlay playsInline />      \n    );\n  }\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport { Camera } from \"../Camera\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\n\nexport class ScopeCamera extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer(), \n      id: this.props.id\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  getImage = (id) => {\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, media: space.data.media });\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .catch(error => console.log(error));\n  };\n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n  \n    camera.position.set(0, 0, -0.0001); //-0.001\n\n    renderer.domElement.className = \"scopehidden\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    \n    //Helper Geometry\n    var helperGeometry = new THREE.BoxBufferGeometry(100, 100, 100, 4, 4, 4);\n    var helperMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});\n    var helper = new THREE.Mesh(helperGeometry, helperMaterial);\n    //scene.add(helper);\n\n    let media = this.state.media;\n    let group;\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(media);\n    if(media!=undefined){\n      group = CSS3elements (this.state.spaceRadius, media);\n      console.log(group);\n      sceneCSS.add(group);\n    }\n\n\n\n    let scopeDiv = document.getElementById(\"scopecamdiv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(rendererCSS.domElement);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id = this.state.id;\n    //console.log(\"FIRST ID \"+id)\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  componentDidUpdate = prevProps => {\n    if (this.props.id !== prevProps.id) {\n      let newId = this.props.id;\n      this.setState({ id: newId });\n      this.getImage(newId).then(() => {\n        this.init(this.state);\n        this.animate();\n      });\n    }\n  };\n\n  render() {\n    return <div id=\"scopecamdiv\"><Camera/></div>;\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport { Camera } from \"../Camera\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\n\nexport class ScopeCameraID extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer()\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  getImage = (id) => {\n    let promises = [];\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, mediaIDs: space.data.media });\n        this.sendNewSpace(space.data);\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .then(()=>{\n        let mediaIDs = this.state.mediaIDs;\n        mediaIDs.forEach(mediaID => {\n            if (typeof mediaID == \"object\"){\n                mediaID = mediaID._id;\n            }\n          promises.push(this.service.get(`/media/${mediaID}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let mediaArr=[];\n        promises.forEach(prom => {\n          mediaArr.push(prom.data);\n        })\n        this.setState({media: mediaArr});\n        console.log(\"MEDIA OBJECTS IN STATE\");\n        console.log(this.state.media);\n      })\n      .catch(error => console.log(error));\n  };\n\n  sendNewSpace = space => {\n    this.props.newSpace(space._id, space.location);\n  }; \n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n  \n    camera.position.set(0, 0, -0.0001); //-0.001\n\n    renderer.domElement.className = \"scopehidden\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n\n    let media = this.state.media;\n    let group;\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(media);\n    if(media!==undefined){\n      group = CSS3elements (this.state.spaceRadius, media);\n      console.log(group);\n      sceneCSS.add(group);\n    }\n\n    let scopeDiv = document.getElementById(\"scopecamdiv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(rendererCSS.domElement);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id =  this.props.match.params.id;\n    console.log(\"COMPONENT CAMERA SCOPE ID\")\n    console.log(id);\n    this.setState({id: id});\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n\n  render() {\n    let id =  this.props.match.params.id;\n    console.log(\"id a route scope \"+id);\n    return (\n        <div id=\"scopecamdiv\">\n            <span className=\"switch-button-container\">\n                <button className=\"button is-primary is-rounded switch-button\"><Link to={`/scope/${id}`}>VR</Link></button>\n            </span>\n            <Camera/>\n        </div>\n    );\n  }\n}\n","import React from \"react\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\nexport class UploadMediaVideo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: this.props.userInSession,\n      spaceID: this.props.currentSpace,\n      youtubeID: \"\"\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(\"uploaded youtube video to this space\");\n    console.log(this.state.img_url);\n    this.createMedia(this.state.youtubeID);\n  }\n\n  handleChange = event => {\n    console.log(event);\n    const value = event.target.value;\n    this.setState({ youtubeID: value }); \n  };\n\n  createMedia = youtubeID => {\n    let media = { url: youtubeID, type: \"YOUTUBE\" };\n    return this.service\n      .post(\"/media\", media)\n      .then(media => {\n        console.log(\"CREATED NEW YOUTUBE VIDEO:\");\n        console.log(media.data);\n        this.addMediaToSpace(media.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  addMediaToSpace = media => {\n    let spaceID = this.state.spaceID;\n    this.updateSpace(media, spaceID);\n  };\n\n  updateSpace = (media, spaceId) => {\n    let newMedia = media;\n    return this.service\n      .patch(`/spaces/${spaceId}`, newMedia)\n      .then(space => {\n        console.log(\"Space updated on DB \" + space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    console.log(\"SPACE ID UPLOAD VIDEO \"+ this.state.spaceID)\n    return (\n      <div>\n        <form onSubmit={e => this.handleSubmit(e)}>\n          <input\n            type=\"text\"\n            name=\"youtubeID\"\n            onChange={e => this.handleChange(e)}\n            placeholder=\"VVsCOnWGHh8\"\n          />\n          <button type=\"submit\">Upload Media</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class BottomMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] })\n  }\n\n  render() {\n   // if (this.state.loggedInUser) {\n\n      return (\n        <nav className=\"nav-style box\" id=\"bottom-nav\">\n          <ul>\n            <li><Link to='/upload-media-img'>+Image</Link></li>\n            <li>{/* <button className=\"button is-primary is-rounded\"> */}<Link to='/upload-scope/'>New</Link>{/* </button> */}</li>\n            <li><Link to='/upload-media-video'>+Video</Link></li>\n          </ul>\n        </nav>\n      )\n    /* } else {\n      return (\n          <nav className=\"nav-style box\" id=\"bottom-nav\" role=\"navigation\" aria-label=\"main navigation\">\n            <ul>\n            <li><Link to='/'>Home</Link></li>\n            </ul>\n          </nav>\n          \n      )\n    } */\n  }\n}\n\n\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, NavbarMenu, NavbarItem } from \"bloomer\";\nrequire(\"dotenv\").config();\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: props.userInSession };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n    this.getScopes();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n  }\n\n  getScopes = () => {\n    let catalogId = this.props.userInSession.catalog;\n    let promises = [];\n    this.setState({ catalogId: catalogId });\n    return this.service\n      .get(`/catalog/${catalogId}`)\n      .then(catalog => {\n        let spacesId = catalog.data.spaces;\n        spacesId.forEach(spaceId => {\n          promises.push(this.service.get(`/spaces/${spaceId}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let spaces = [];\n        promises.forEach(prom => {\n          spaces.push(prom.data);\n        });\n        this.setState({ userSpaces: spaces });\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    if (this.props.userInSession) {\n      let userSpaces = this.state.userSpaces;\n      if (userSpaces) {\n        userSpaces.forEach(e => {});\n        return (\n          <div>\n            <h1 className=\"profile-feed\">Profile</h1>\n            {userSpaces.map(space => {\n              return (\n                <div key={space._id} className=\"scope-in-feed\">\n                  <Link to={`/scope/${space._id}`}>\n                    <img\n                      className=\"panorama-feed\"\n                      height=\"50px\"\n                      src={space.image}\n                    />\n                  </Link>\n                </div>\n              );\n            })}\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"profile-feed\">\n            <h1>Profile</h1>\n          </div>\n        );\n      }\n    } else {\n      return <div />;\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, NavbarMenu, NavbarItem } from \"bloomer\";\nrequire('dotenv').config();\n\nexport default class ProfileID extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n    this.getScopes();\n  }\n\n  getScopes = () => {\n    let username = this.props.match.params.username;\n    let promises = [];\n    this.service.get(`auth/user/${username}`)\n      .then(user => {\n        let catalogId = user.data.catalog;\n        console.log(\"USER FROM DB TO PROFILE\");\n        console.log(user);\n        this.setState({ catalogId: catalogId });\n        return this.service.get(`/catalog/${catalogId}`);\n      })\n      .then(catalog => {\n        let spacesId = catalog.data.spaces;\n        spacesId.forEach(spaceId => {\n          promises.push(this.service.get(`/spaces/${spaceId}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let spaces = [];\n        promises.forEach(prom => {\n          spaces.push(prom.data);\n        });\n        this.setState({ userSpaces: spaces });\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    let userSpaces = this.state.userSpaces;\n\n    if (userSpaces) {\n      userSpaces.forEach(e => {});\n      return (\n        <div>\n          <h1 className=\"profile-feed\">Profile</h1>\n          {userSpaces.map(space => {\n            return (\n              <div key={space._id} className=\"scope-in-feed\">\n                <Link to={`/scope/${space._id}`}>\n                  <img\n                    className=\"panorama-feed\"\n                    height=\"50px\"\n                    src={space.image}\n                  />\n                </Link>\n              </div>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"profile-feed\">\n          <h1>Profile</h1>\n        </div>\n      );\n    }\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\n//import TrackballControls from \"../../lib/TrackballControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport axios from \"axios\";\nrequire('dotenv').config();\n\n\nexport class ScopeID extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer()\n    };\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/api`\n    });\n    console.log(\"COMPONENT SCOPE ID\")\n    console.log(this.props)\n  }\n\n  getImage = (id) => {\n    let promises = [];\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, mediaIDs: space.data.media });\n        this.sendNewSpace(space.data);\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .then(()=>{\n        let mediaIDs = this.state.mediaIDs;\n        mediaIDs.forEach(mediaID => {\n          if (typeof mediaID == \"object\"){\n            mediaID = mediaID._id;\n          }\n          promises.push(this.service.get(`/media/${mediaID}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let mediaArr=[];\n        promises.forEach(prom => {\n          mediaArr.push(prom.data);\n        })\n        this.setState({media: mediaArr});\n        console.log(\"MEDIA OBJECTS IN STATE\");\n        console.log(this.state.media);\n      })\n      .catch(error => console.log(error));\n  };\n\n  sendNewSpace = space => {\n    this.props.newSpace(space._id, space.location);\n  }; \n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n    //this.setState({ controls: new TrackballControls(camera) });\n    /* this.state.controls.rotateSpeed = 1.0;\n    this.state.controls.zoomSpeed = 1.2;\n    this.state.controls.panSpeed = 0.8;*/\n    camera.position.set(0, 0, -0.001);\n\n    renderer.domElement.className = \"scope\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n\n    let media = this.state.media;\n    let group;\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(media);\n    if(media!==undefined){\n      group = CSS3elements (this.state.spaceRadius, media);\n      console.log(group);\n      sceneCSS.add(group);\n    }\n  \n    let scopeDiv = document.getElementById(\"scopediv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id =  this.props.match.params.id\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  render() {\n    let id =  this.props.match.params.id;\n    console.log(\"id a route camera \"+id);\n    return (\n    <div id=\"scopediv\">\n      <span className=\"switch-button-container\">\n        <button className=\"button is-primary is-rounded switch-button\"><Link to={`/camera/${id}`}>AR</Link></button>\n      </span>\n    </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Switch, Route } from 'react-router-dom';\n\n\nimport \"./App.scss\";\n\nimport Navbar from './components/Navbar';\nimport AuthService from \"./components/auth/AuthService\";\nimport Signup from './components/auth/Signup';\nimport Login from './components/auth/Login';\n\nimport { ScopeView } from \"./components/ScopeView\";\nimport { UploadSpace } from \"./components/upload/UploadSpace\";\nimport { UploadMediaImg} from \"./components/upload/UploadMediaImg\";\n//import Map from './components/maps/Map';\nimport { ScopeCamera } from \"./components/3dSpace/ScopeCamera\";\nimport { ScopeCameraID } from \"./components/3dSpace/ScopeCameraID\";\nimport { UploadMediaVideo } from \"./components/upload/UploadMediaVideo\";\nimport BottomMenu from \"./components/BottomMenu\";\nimport Profile from \"./components/Profile\";\nimport ProfileID from \"./components/ProfileID\";\nimport { ScopeID } from \"./components/3dSpace/ScopeID\";\n//import { Welcome } from \"./components/3dSpace/Welcome\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedInUser: null,\n      spaceId: \"5bc3313fdd315804e045a573\",\n      spaceLocation: {lat: 40.3923451, lng: -3.6985332999999994}\n    };\n    this.service = new AuthService();\n  }\n\n  getTheUser = userObj => {\n    this.setState({\n      loggedInUser: userObj\n    });\n  };\n\n  logout = () => {\n    this.service.logout().then(() => {\n      this.setState({ loggedInUser: null });\n    });\n  };\n\n  fetchUser() {\n    if (this.state.loggedInUser === null) {\n      this.service\n        .loggedin()\n        .then(response => {\n          this.setState({\n            loggedInUser: response\n          });\n        })\n        .catch(err => {\n          this.setState({\n            loggedInUser: false\n          });\n        });\n    }\n  }\n\n  actualizeSpace = (space, location) => {\n    this.setState({ spaceId: space, spaceLocation: location });\n  };\n\n  render() {\n    console.log(\"SPACE ID STATE!!!!!!!!\")\n    console.log(this.state.spaceId)\n    this.fetchUser();\n    return (\n      <div className=\"App\">\n        <header className=\"header\">\n          <Navbar userInSession={this.state.loggedInUser} logout={this.logout} />\n        </header>\n        <main>\n          <Switch>\n            <Route exact path='/signup' render={() => <Signup getUser={this.getTheUser}/>}/>\n            <Route exact path='/login' render={() => <Login getUser={this.getTheUser}/>}/>\n            <Route path='/profile/:username' render={(props) => <ProfileID {...props}/>}/>\n            <Route exact path='/profile' render={() => <Profile userInSession={this.state.loggedInUser}/>}/>\n            <Route path='/scope/:id' render={(props) => <ScopeID newSpace={(space, location) => {this.actualizeSpace(space, location)}} {...props}/>} newSpace={(space, location) => {this.actualizeSpace(space, location)}}/>\n            <Route exact path='/scope' render={() => <ScopeView id={this.state.spaceId}/>}/>\n            <Route exact path='/camera/:id' render={(props) => <ScopeCameraID newSpace={(space, location) => {this.actualizeSpace(space, location)}} {...props}/>}/>\n            <Route exact path='/camera' render={() => <ScopeCamera id={this.state.spaceId}/>}/>\n            <Route exact path='/upload-scope' render={() => <UploadSpace newSpace={(space, location) => {this.actualizeSpace(space, location)}} userInSession={this.state.loggedInUser}/>}/>\n            <Route exact path='/upload-media-img' render={() => <UploadMediaImg userInSession={this.state.loggedInUser} currentSpace={this.state.spaceId}/>}/>\n            <Route exact path='/upload-media-video' render={() => <UploadMediaVideo userInSession={this.state.loggedInUser} currentSpace={this.state.spaceId}/>}/>\n          </Switch>\n        </main>\n        <footer>\n            <BottomMenu userInSession={this.state.loggedInUser}/>\n        </footer>\n          \n         {/*  <Welcome/> */}\n        {/* <Map id=\"myMap\" options={{center: this.state.spaceLocation, zoom: 8}} \n          onMapLoad={map => {\n            let marker = new window.google.maps.Marker({\n            position: this.state.spaceLocation, map: map,\n            title: 'Hello Istanbul!'\n            });\n          }} \n        />*/}\n      </div>\n    );\n  }\n}\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"bulma/css/bulma.css\";\nimport './index.scss';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}