{"version":3,"sources":["components/Navbar.js","components/auth/AuthService.js","components/auth/Signup.js","components/auth/Login.js","lib/DeviceOrientationControls.js","lib/TrackballControls.js","lib/CSS3DRenderer.js","components/3dSpace/CSS3elements.js","components/3dSpace/Welcome.js","components/Camera.js","components/3dSpace/Scope.js","components/ScopeView.js","components/maps/geolocalize.js","components/upload/UploadSpace.js","components/upload/UploadMediaImg.js","components/3dSpace/ScopeCamera.js","components/upload/UploadMediaVideo.js","components/Profile.js","components/BottomMenu.js","components/ProfileID.js","components/3dSpace/ScopeID.js","App.js","serviceWorker.js","index.js"],"names":["Navbar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleLogout","e","logout","state","loggedInUser","nextProps","setState","objectSpread","react_default","a","createElement","className","onClick","Link","to","username","role","aria-label","Component","AuthService","signup","password","service","post","then","response","data","login","loggedin","get","catch","err","console","error","axios","create","baseURL","withCredentials","Signup","handleFormSubmit","event","preventDefault","getUser","user","log","handleChange","_event$target","target","name","value","defineProperty","_this2","onSubmit","type","onChange","Login","THREE","require","DeviceOrientationControls","object","scope","rotation","reorder","enabled","deviceOrientation","screenOrientation","alphaOffset","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","window","orientation","setObjectQuaternion","zee","Vector3","euler","Euler","q0","Quaternion","q1","Math","sqrt","quaternion","alpha","beta","gamma","orient","set","setFromEuler","multiply","setFromAxisAngle","connect","addEventListener","disconnect","removeEventListener","update","device","degToRad","dispose","TrackballControls","domElement","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","undefined","document","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","lastPosition","_state","_prevState","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","changeEvent","startEvent","endEvent","handleResize","innerWidth","innerHeight","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","getMouseOnCircle","keydown","keyCode","keyup","mousedown","stopPropagation","button","copy","mousemove","mouseup","dispatchEvent","mousewheel","deltaMode","y","deltaY","touchstart","touches","length","dx","dy","x","touchmove","touchend","contextmenu","rotateCamera","angle","axis","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","sub","normalize","crossVectors","setLength","add","applyQuaternion","zoomCamera","factor","multiplyScalar","panCamera","mouseChange","objectUp","pan","lengthSq","cross","subVectors","checkDistances","addVectors","lookAt","distanceToSquared","reset","prototype","EventDispatcher","constructor","CSS3DRenderer","_width","_height","_widthHalf","_heightHalf","REVISION","matrix","Matrix4","cache","camera","fov","style","objects","WeakMap","overflow","cameraElement","WebkitTransformStyle","transformStyle","appendChild","isIE","test","navigator","userAgent","epsilon","abs","getCameraCSSMatrix","elements","getObjectCSSMatrix","cameraCSSMatrix","matrix3d","getSize","setSize","getDistanceToSquared","b","object1","object2","setFromMatrixPosition","matrixWorld","zOrder","scene","sorted","result","traverse","CSS3DObject","push","filterAndFlatten","sort","distanceToCameraSquared","zMax","i","l","element","zIndex","render","projectionMatrix","isPerspectiveCamera","WebkitPerspective","perspective","updateMatrixWorld","parent","isOrthographicCamera","matrixWorldInverse","WebkitTransform","transform","renderObject","CSS3DSprite","transpose","copyPosition","scale","cachedStyle","objectData","parentNode","children","Object3D","removeChild","sphere","iframeElement","ytID","z","ry","div","concat","backgroundColor","iframe","border","url","join","src","imageElement","image","CSS3elements","spaceRadius","media","radius","many","PI","group","Group","forEach","cos","sin","rot","newImage","newIFrame","Camera","_React$Component","cameraStart","cameraView","querySelector","mediaDevices","getUserMedia","constraints","stream","getTracks","srcObject","video","facingMode","audio","inherits","createClass","key","id","autoPlay","playsInline","React","Scope","getImage","space","init","_ref","renderer","sceneCSS","rendererCSS","controls","geometry","loader","crossOrigin","map","load","material","helperGeometry","helperMaterial","color","wireframe","scopeDiv","getElementById","setPixelRatio","devicePixelRatio","onWindowResize","animate","_this$state","requestAnimationFrame","_this$state2","aspect","updateProjectionMatrix","componentDidMount","componentDidUpdate","prevProps","newId","antialias","ScopeView","_Component","apply","arguments","Scope_Scope","geolocalize","Promise","resolve","reject","geolocation","getCurrentPosition","pos","center","lat","coords","latitude","lng","longitude","UploadSpace","createSpace","image_url","creator","_id","location","sendNewSpace","addSpaceToUser","newSpace","updateCatalog","catalog","catalogId","spaceId","patch","userInSession","file","files","uploadImage","img_url","_this3","formData","FormData","append","headers","Content-Type","img","_this4","class","handleSubmit","bloomer_min","isColor","UploadMediaImg","createMedia","addMediaToSpace","spaceID","updateSpace","newMedia","currentSpace","ScopeCamera","Camera_Camera","UploadMediaVideo","youtubeID","placeholder","Profile","getScopes","promises","spaces","all","prom","userSpaces","ProfileID","match","params","ScopeID","App","getTheUser","userObj","actualizeSpace","spaceLocation","fetchUser","Navbar_Navbar","Switch","Route","exact","path","auth_Signup","auth_Login","ProfileID_ProfileID","Profile_Profile","ScopeID_ScopeID","ScopeView_ScopeView","ScopeCamera_ScopeCamera","UploadSpace_UploadSpace","UploadMediaImg_UploadMediaImg","UploadMediaVideo_UploadMediaVideo","Boolean","hostname","ReactDOM","BrowserRouter","src_App_0","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9c9cdf5a.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n//import AuthService from '../auth/AuthService';\nimport \"bulma/css/bulma.css\";\nimport { Button } from \"bloomer\";\n\nexport default class Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null };\n    //this.service = new AuthService();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] })\n  }\n\n  handleLogout = (e) => {\n    this.props.logout()\n  }\n\n  render() {\n    if (this.state.loggedInUser) {\n      return (\n        <nav className=\"nav-style\">\n          <ul>\n            <li><a onClick={this.handleLogout}>Logout</a></li>\n            <li><Link to='/'>Home</Link></li>\n            <li><Link to='/scope'>See Scope</Link></li> {/* FALTA ID */}\n            <li><Link to='/camera'>See AR</Link></li> {/* FALTA ID */}\n            <li><Link to='/upload-scope'>New Scope</Link></li>\n            <li><Link to='/upload-media-img'>Add Image</Link></li>\n            <li><Link to='/upload-media-video'>Add Video</Link></li>\n          </ul>\n\n          <h2>Welcome, {this.state.loggedInUser.username}</h2>\n        </nav>\n      )\n    } else {\n      return (\n          <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n\n            <ul>\n            <li><Link to='/'>Home</Link></li>\n            <li><Link to='/signup'>Signup</Link></li>\n            <li><Link to='/login'>Login</Link></li>\n            </ul>\n          </nav>\n      )\n    }\n  }\n}","// auth/auth-service.js\nimport axios from 'axios';\n\nclass AuthService {\n  constructor() {\n    this.service = axios.create({\n      baseURL: 'http://localhost:3010/api/auth',\n      withCredentials: true\n    });\n  }\n\n  signup = (username, password) => {\n    return this.service.post('/signup', {username, password})\n    .then(response => response.data)\n  }\n\n  login = (username, password) => {\n    return this.service.post('/login', {username, password})\n    .then(response => response.data)\n  }\n\n  loggedin = () => {\n    return this.service.get('/currentuser',)\n    .then(response => response.data)\n    .catch(err => {\n      console.error('Error in getUser', err)\n    })\n  }\n\n  logout = () => {\n    return this.service.get('/logout',)\n    .then(response => response.data)\n  }\n}\n\nexport default AuthService;","// auth/Signup.js\nimport React, { Component } from 'react';\nimport AuthService from './AuthService'\n\nclass Signup extends Component {\n  constructor(props){\n    super(props);\n    this.state = { username: '', password: '' };\n    this.service = new AuthService();\n  }\n    \n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service.signup(username, password)\n    .then( response => {\n        this.setState({\n            username: \"\", \n            password: \"\",\n        });\n        this.props.getUser(response.user)\n    })\n    .catch( error => console.log(error) )\n  }\n\n  handleChange = (event) => {  \n    const {name, value} = event.target;\n    this.setState({[name]: value});\n  }\n      \n\n  render() {\n    return(\n      <div>\n        <h3>Welcome!, create your account next:</h3>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <fieldset>\n            <label>Username:</label>\n            <input type=\"text\" name=\"username\" value={this.state.username} onChange={ e => this.handleChange(e)}/>\n          </fieldset>\n          \n          <fieldset>\n            <label>Password:</label>\n            <input type=\"password\" name=\"password\" value={this.state.password} onChange={ e => this.handleChange(e)} />\n          </fieldset>\n          \n          <input type=\"submit\" value=\"Sign up\" />\n        </form>\n\n      </div>\n    )\n  }\n}\n\nexport default Signup;","// auth/Signup.js\nimport React, { Component } from \"react\";\n//import { Link } from 'react-router-dom';\nimport AuthService from \"./AuthService\";\n//import \"bulma/css/bulma.css\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service\n      .login(username, password)\n      .then(response => {\n        this.setState({\n          username: username,\n          password: password,\n          error: false\n        });\n\n        this.props.getUser(response);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div>\n\n        <h3>Please, login to our site</h3>\n        <form onSubmit={this.handleFormSubmit}>\n          <fieldset>\n            <label>Username:</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              value={this.state.username}\n              onChange={e => this.handleChange(e)}\n            />\n          </fieldset>\n\n          <fieldset>\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={this.state.password}\n              onChange={e => this.handleChange(e)}\n            />\n          </fieldset>\n\n          <input type=\"submit\" value=\"Login\" />\n        </form>\n\n        <h1>{this.state.error ? \"Error\" : \"\"}</h1>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\nvar THREE = require('three');\n\nTHREE.DeviceOrientationControls = function ( object ) {\n\tvar scope = this;\n\tthis.object = object;\n\tthis.object.rotation.reorder( 'YXZ' );\n\tthis.enabled = true;\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\tthis.alphaOffset = 0; // radians\n\n\tvar onDeviceOrientationChangeEvent = function ( event ) {\n\n\t\tscope.deviceOrientation = event;\n\t};\n\tvar onScreenOrientationChangeEvent = function () {\n\t\tscope.screenOrientation = window.orientation || 0;\n\t};\n\t// The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\tvar setObjectQuaternion = function () {\n\t\tvar zee = new THREE.Vector3( 0, 0, 1 );\n\t\tvar euler = new THREE.Euler();\n\t\tvar q0 = new THREE.Quaternion();\n\t\tvar q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\t\treturn function ( quaternion, alpha, beta, gamma, orient ) {\n\t\t\teuler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\t\t\tquaternion.setFromEuler( euler ); // orient the device\n\t\t\tquaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\t\t\tquaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\t\t};\n\t}();\n\tthis.connect = function () {\n\t\tonScreenOrientationChangeEvent(); // run once on load\n\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\tscope.enabled = true;\n\t};\n\tthis.disconnect = function () {\n\t\twindow.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\tscope.enabled = false;\n\t};\n\tthis.update = function () {\n\t\tif ( scope.enabled === false ) return;\n\t\tvar device = scope.deviceOrientation;\n\t\tif ( device ) {\n\t\t\tvar alpha = device.alpha ? THREE.Math.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\t\t\tvar beta = device.beta ? THREE.Math.degToRad( device.beta + 90) : THREE.Math.degToRad(90); // X'\n\t\t\tvar gamma = device.gamma ? THREE.Math.degToRad( device.gamma ) : 0; // Y''\n\t\t\tvar orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O\n\t\t\tsetObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\t\t}\n\t};\n\tthis.dispose = function () {\n\t\tscope.disconnect();\n\t};\n\tthis.connect();\n};\n\nexport default THREE.DeviceOrientationControls;","/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\nvar THREE = require('three');\n\nTHREE.TrackballControls = function ( object, domElement ) {\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\t// internals\n\n\tthis.target = new THREE.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\n\tvar _state = STATE.NONE,\n\t\t_prevState = STATE.NONE,\n\n\t\t_eye = new THREE.Vector3(),\n\n\t\t_movePrev = new THREE.Vector2(),\n\t\t_moveCurr = new THREE.Vector2(),\n\n\t\t_lastAxis = new THREE.Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new THREE.Vector2(),\n\t\t_zoomEnd = new THREE.Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new THREE.Vector2(),\n\t\t_panEnd = new THREE.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.screen.left = 0;\n\t\t\tthis.screen.top = 0;\n\t\t\tthis.screen.width = window.innerWidth;\n\t\t\tthis.screen.height = window.innerHeight;\n\n\t\t} else {\n\n\t\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tthis.screen.width = box.width;\n\t\t\tthis.screen.height = box.height;\n\n\t\t}\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new THREE.Vector3(),\n\t\t\tquaternion = new THREE.Quaternion(),\n\t\t\teyeDirection = new THREE.Vector3(),\n\t\t\tobjectUpDirection = new THREE.Vector3(),\n\t\t\tobjectSidewaysDirection = new THREE.Vector3(),\n\t\t\tmoveDirection = new THREE.Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar( factor );\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t}\n\n\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\t_this.checkDistances();\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t_prevState = _state;\n\n\t\tif ( _state !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_state = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_state = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_state = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_state = _prevState;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t_state = event.button;\n\n\t\t}\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tif ( _this.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\t\t\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.TrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.TrackballControls.prototype.constructor = THREE.TrackballControls;\n\nexport default THREE.TrackballControls;","/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n * @author mrdoob / http://mrdoob.com/\n * @author yomotsu / https://yomotsu.net/\n */\n\nvar THREE = require('three');\n\nTHREE.CSS3DRenderer = function () {\n\n\tconsole.log( 'THREE.CSS3DRenderer', THREE.REVISION );\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar matrix = new THREE.Matrix4();\n\n\tvar cache = {\n\t\tcamera: { fov: 0, style: '' },\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tvar cameraElement = document.createElement( 'div' );\n\n\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\tcameraElement.style.transformStyle = 'preserve-3d';\n\n\tdomElement.appendChild( cameraElement );\n\n\tvar isIE = /Trident/i.test( navigator.userAgent );\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t\tcameraElement.style.width = width + 'px';\n\t\tcameraElement.style.height = height + 'px';\n\n\t};\n\n\tfunction epsilon( value ) {\n\n\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t}\n\n\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\tvar elements = matrix.elements;\n\n\t\treturn 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t}\n\n\tfunction getObjectCSSMatrix( matrix, cameraCSSMatrix ) {\n\n\t\tvar elements = matrix.elements;\n\t\tvar matrix3d = 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t\tif ( isIE ) {\n\n\t\t\treturn 'translate(-50%,-50%)' +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' +\n\t\t\t\tcameraCSSMatrix +\n\t\t\t\tmatrix3d;\n\n\t\t}\n\n\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t}\n\n\tfunction renderObject( object, camera, cameraCSSMatrix ) {\n\n\t\tif ( object instanceof THREE.CSS3DObject ) {\n\n\t\t\tvar style;\n\n\t\t\tif ( object instanceof THREE.CSS3DSprite ) {\n\n\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\n\t\t\t\tmatrix.transpose();\n\t\t\t\tmatrix.copyPosition( object.matrixWorld );\n\t\t\t\tmatrix.scale( object.scale );\n\n\t\t\t\tmatrix.elements[ 3 ] = 0;\n\t\t\t\tmatrix.elements[ 7 ] = 0;\n\t\t\t\tmatrix.elements[ 11 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tstyle = getObjectCSSMatrix( matrix, cameraCSSMatrix );\n\n\t\t\t} else {\n\n\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t\tvar element = object.element;\n\t\t\tvar cachedStyle = cache.objects.get( object );\n\n\t\t\tif ( cachedStyle === undefined || cachedStyle !== style ) {\n\n\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\telement.style.transform = style;\n\n\t\t\t\tvar objectData = { style: style };\n\n\t\t\t\tif ( isIE ) {\n\n\t\t\t\t\tobjectData.distanceToCameraSquared = getDistanceToSquared( camera, object );\n\n\t\t\t\t}\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t}\n\n\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], camera, cameraCSSMatrix );\n\n\t\t}\n\n\t}\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new THREE.Vector3();\n\t\tvar b = new THREE.Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tfunction filterAndFlatten( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.CSS3DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t}\n\n\tfunction zOrder( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\n\t\t\t\tdomElement.style.perspective = fov + 'px';\n\n\t\t\t}\n\n\t\t\tcache.camera.fov = fov;\n\n\t\t}\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tvar cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t'scale(' + fov + ')' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\tvar style = cameraCSSMatrix +\n\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\tif ( cache.camera.style !== style && ! isIE ) {\n\n\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\tcameraElement.style.transform = style;\n\n\t\t\tcache.camera.style = style;\n\n\t\t}\n\n\t\trenderObject( scene, camera, cameraCSSMatrix );\n\n\t\tif ( isIE ) {\n\n\t\t\t// IE10 and 11 does not support 'preserve-3d'.\n\t\t\t// Thus, z-order in 3D will not work.\n\t\t\t// We have to calc z-order manually and set CSS z-index for IE.\n\t\t\t// FYI: z-index can't handle object intersection\n\t\t\tzOrder( scene );\n\n\t\t}\n\n\t};\n\n};\n\n\nexport default THREE.CSS3DRenderer;","var THREE = require('three');\n//import CSS3DObject from \".../lib/CSS3DObject\";\n\n\nvar THREE = require('three');\n\nTHREE.CSS3DObject = function ( element ) {\n\tTHREE.Object3D.call( this );\n\tthis.element = element;\n\tthis.element.style.position = 'absolute';\n\tthis.addEventListener( 'removed', function () {\n\t\tif ( this.element.parentNode !== null ) {\n\t\t\tthis.element.parentNode.removeChild( this.element );\n\t\t}\n\t} );\n};\nTHREE.CSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\nTHREE.CSS3DSprite = function ( element ) {\n\tTHREE.CSS3DObject.call( this, element );\n};\nTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\nlet elementSize = 200;\n\nconst iframeElement = (ytID, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    div.style.width = `${elementSize}px`;\n    //div.style.height = '360px';\n    div.style.backgroundColor = '#000';\n    var iframe = document.createElement( 'iframe' );\n    //iframe.style.width = \"480px\";\n    //iframe.style.height = '360px';\n    iframe.style.border = '0px';\n    let url = [ 'https://www.youtube.com/embed/', ytID, '?rel=0' ].join( '' );\n    iframe.src = url;\n    div.appendChild( iframe );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    console.log(ytID);\n    console.log(url);\n    return object;\n}\nconst imageElement = (url, x, y, z, ry) =>{\n    var div = document.createElement( 'div' );\n    //div.style.width = '50px';\n    //div.style.height = '50px';\n    div.style.backgroundColor = '#000';\n    var image = document.createElement( 'img' );\n    image.style.border = '0px';\n    image.src = url;//\"https://scontent-mad1-1.cdninstagram.com/vp/30f76f820acdb893b9cb648ae0adfd57/5C5FEA68/t51.2885-15/e35/25018699_872711359576719_1019478494217764864_n.jpg\";\n    image.style.width = `${elementSize}px`;\n    image.style.height = 'auto';\n    div.appendChild( image );\n    var object = new THREE.CSS3DObject( div );\n    object.position.set( x, y, z );\n    object.rotation.y = ry;\n    console.log(url);\n    return object;\n}\n\nexport const CSS3elements = (spaceRadius, media) => {\n    let radius = spaceRadius-50;\n    let many = media.length;\n    let angle = Math.PI * 2 / many;\n    let x,z;\n    let y = 0;//spaceRadius/2;\n    let group = new THREE.Group();\n    media.forEach((e,i) => {\n        let ry = angle * i;\n        x = radius * Math.cos(ry);\n        z = radius * Math.sin(ry);\n        let rot = 3*Math.PI/2 - ry;\n        if (e.type == \"IMAGE\"){\n            let newImage = new imageElement(e.url, x, y, z, rot);\n            //console.log(e);\n            group.add(newImage);\n        } else if (e.type == \"YOUTUBE\"){\n            //console.log(e);\n            let newIFrame = new iframeElement(e.url, x, y, z, rot);\n            group.add(newIFrame);\n        }else {\n            let newIFrame = new iframeElement(e, x, y, z, rot);\n            group.add(newIFrame);\n        }\n    });\n    return group;\n}\n\n\n/* export const CSS3elements = (spaceRadius, data) => {\n    let radius = spaceRadius-50;\n    let many = data.length;\n    let angle = Math.PI * 2 / many;\n    let x,z;\n    let y = 0;//spaceRadius/2;\n    let group = new THREE.Group();\n    data.forEach((e,i) => {\n        let ry = angle * i;\n        x = radius * Math.cos(ry);\n        z = radius * Math.sin(ry);\n        let rot = 3*Math.PI/2 - ry;\n        if(i % 2==0){\n            let newImage = new imageElement(e, x, y, z, rot);\n            group.add(newImage);\n        } else{\n            let newIFrame = new iframeElement(e, x, y, z, rot);\n            group.add(newIFrame);\n        } \n    });\n    return group;\n} */","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport TrackballControls from \"../../lib/TrackballControls\";\n\nvar sphere;\nexport class Welcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      renderer: new THREE.WebGLRenderer({ antialias: true })\n    };\n  }\n\n  init = ({ camera, scene, renderer }) => {\n    camera.position.set(0, 0, -100); //-0.001\n   \n\n    renderer.domElement.className = \"welcome\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 100, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    //const loader = new THREE.TextureLoader();\n    //const map = loader.load(\"/stripes.png\");\n    //var material = new THREE.MeshBasicMaterial({ map });\n    var material = new THREE.MeshBasicMaterial({color: 0xff0000, wireframe: true});\n    sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    scene.background = new THREE.Color( 0xffffff );\n    let scopeDiv = document.getElementById(\"welcome\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    scopeDiv.appendChild(renderer.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer} = this.state;\n    window.requestAnimationFrame(this.animate);\n    sphere.rotation.x += 0.001;\n    sphere.rotation.y += 0.002;\n    sphere.rotation.z += 0.001;\n    renderer.render(scene, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n      this.init(this.state);\n      this.animate();\n  };\n\n  render() {\n    return <div id=\"welcome\"/>;\n  }\n}\n","import React from \"react\";\n\n//var constraints = { video: { facingMode: \"user\" }, audio: false };\n//const cameraView = document.querySelector(\"#camera--view\");\n//const cameraSensor = document.querySelector(\"#camera--sensor\");\n\nexport class Camera extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      cameraView: document.querySelector(\"#camera--view\"),\n      constraints: { video: { facingMode: \"user\" }, audio: false }\n    };\n\n    window.addEventListener(\"load\", this.cameraStart, false);\n  }\n\n  cameraStart = () => {\n    let cameraView = document.querySelector(\"#camera--view\");\n    navigator.mediaDevices\n      .getUserMedia(this.state.constraints)\n      .then(function(stream) {\n        let track = stream.getTracks()[0];\n        cameraView.srcObject = stream;\n      })\n      .catch(function(error) {\n        console.error(\"Oops. Something is broken.\", error);\n      });\n  };\n\n  render() {\n    return (\n      <video className=\"camera\"id=\"camera--view\" autoPlay playsInline />      \n    );\n  }\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport TrackballControls from \"../../lib/TrackballControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport { Camera } from \"../Camera\";\nimport axios from \"axios\";\n\n\nexport class Scope extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer(), \n      id: this.props.id\n    };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  getImage = (id) => {\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, media: space.data.media });\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .catch(error => console.log(error));\n  };\n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n    /* this.setState({ controls: new TrackballControls(camera) });\n    this.state.controls.rotateSpeed = 1.0;\n    this.state.controls.zoomSpeed = 1.2;\n    this.state.controls.panSpeed = 0.8; */\n    camera.position.set(0, 0, -0.0001); //-0.001\n\n    renderer.domElement.className = \"scope\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    \n    //Helper Geometry\n    var helperGeometry = new THREE.BoxBufferGeometry(100, 100, 100, 4, 4, 4);\n    var helperMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});\n    var helper = new THREE.Mesh(helperGeometry, helperMaterial);\n    //scene.add(helper);\n\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(this.state.media);\n    let group = CSS3elements (this.state.spaceRadius, this.state.media);\n    sceneCSS.add(group);\n\n    let scopeDiv = document.getElementById(\"scopediv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(renderer.domElement);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(rendererCSS.domElement);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id = this.state.id;\n    //console.log(\"FIRST ID \"+id)\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  componentDidUpdate = prevProps => {\n    if (this.props.id !== prevProps.id) {\n      let newId = this.props.id;\n      this.setState({ id: newId });\n      this.getImage(newId).then(() => {\n        this.init(this.state);\n        this.animate();\n      });\n    }\n  };\n\n  render() {\n    return <div id=\"scopediv\"/>;\n  }\n}\n","import React, { Component } from \"react\";\nimport { Scope } from \"./3dSpace/Scope\";\n\nexport class ScopeView extends Component {\n    render() {\n      return (\n          <div className=\"ScopeView\">\n            <Scope id={this.props.id}/>\n          </div>\n      );\n    }\n  }","const geolocalize = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) reject(\"No geolocation available\");\n    navigator.geolocation.getCurrentPosition(pos => {\n      const center = {\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      };\n      resolve(center);\n    }, reject);\n  });\n};\n\n\nexport default geolocalize;","import React from \"react\";\nimport axios from \"axios\";\nimport geolocalize from \"../maps/geolocalize\";\n//import \"bulma/css/bulma.css\";\nimport { Button } from \"bloomer\";\n\nexport class UploadSpace extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: this.props.userInSession };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  handleChange(e) {\n    //console.log('handleChange');\n    //console.log('DEBUG e.target.files[0]', e.target.files[0]);\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.uploadImage(this.state.file).then(() => {\n      console.log(\"uploaded image to create space\");\n      console.log(this.state.img_url);\n      geolocalize().then(center => {\n        console.log(center);\n        this.createSpace(this.state.img_url, center);\n      });\n    });\n  }\n\n  uploadImage(file) {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    //console.log(\"DEBUG formData\", formData.get(\"photo\"));\n    return this.service\n      .post(\"/uploadCloud\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      })\n      .then(img => {\n        this.setState({ img_url: img.data.url });\n        //console.log(\"Image from CLOUD\");\n        //console.log(img.data.url);\n      })\n      .catch(error => console.log(error));\n  }\n\n  createSpace = (image_url, center) => {\n    let { lat, lng } = center;\n    console.log(center);\n    let user = this.state.loggedInUser;\n    let space = { image: image_url, creator: user._id, location: center };\n    return this.service\n      .post(\"/spaces\", space)\n      .then(space => {\n        console.log(\"CREATED NEW SPACE:\");\n        console.log(space.data);\n        this.sendNewSpace(space.data);\n        this.addSpaceToUser(space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  sendNewSpace = space => {\n    this.props.newSpace(space._id, space.location);\n  };\n\n  addSpaceToUser = space => {\n    let user = this.state.loggedInUser;\n    console.log(\"ADD TO USER CATALOG\");\n    console.log(space);\n    console.log(user);\n    this.updateCatalog(user.catalog, space._id);\n  };\n\n  updateCatalog = (catalogId, spaceId) => {\n    let newSpace = { spaceId };\n    return this.service\n      .patch(`/catalog/${catalogId}`, newSpace)\n      .then(catalog => {\n        console.log(\"Catalog updated on DB \" + catalog.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    return (\n      <div>\n        <div class=\"file is-boxed\">\n          <form onSubmit={e => this.handleSubmit(e)}>\n            <input className=\"file-input\" type=\"file\" onChange={e => this.handleChange(e)} /> <br />\n            <span className=\"file-cta\">\n              <span className=\"file-label\">Choose a panorama</span>\n            </span>\n            <Button type=\"submit\" isColor='primary'>Upload Space</Button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport axios from \"axios\";\n//import \"bulma/css/bulma.css\";\nimport { Button } from \"bloomer\";\n\nexport class UploadMediaImg extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      loggedInUser: this.props.userInSession,\n      spaceID: this.props.currentSpace\n    };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.uploadImage(this.state.file)\n    .then(() => {\n      console.log(\"uploaded image to this space\");\n      console.log(this.state.img_url);\n      this.createMedia(this.state.img_url);\n      \n    });\n  }\n\n  uploadImage(file) {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    //console.log(\"DEBUG formData\", formData.get(\"photo\"));\n    return this.service\n      .post(\"/uploadCloud\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      })\n      .then(img => {\n        this.setState({ img_url: img.data.url });\n      })\n      .catch(error => console.log(error));\n  }\n\n  createMedia = (image_url) => {\n    let media = { url: image_url, type: \"IMAGE\"};\n    return this.service\n      .post(\"/media\", media)\n      .then(media => {\n        console.log(\"CREATED NEW IMAGE:\");\n        console.log(media.data);\n        this.addMediaToSpace(media.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n\n  addMediaToSpace = media => {\n    let spaceID = this.state.spaceID;\n    this.updateSpace(media, spaceID);\n  };\n\n  updateSpace = (media, spaceId) => {\n    let newMedia = media;\n    return this.service\n      .patch(`/spaces/${spaceId}`, newMedia)\n      .then(space => {\n        console.log(\"Space updated on DB \" + space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    return (\n      <div>\n        <div class=\"file is-boxed\">\n          <form onSubmit={e => this.handleSubmit(e)}>\n            <input className=\"file-input\" type=\"file\" onChange={e => this.handleChange(e)} /> <br />\n            <span className=\"file-cta\">\n              <span className=\"file-label\">Choose an image</span>\n            </span>\n            <Button type=\"submit\" isColor='primary'>Upload Images to this Scope</Button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport { Camera } from \"../Camera\";\nimport axios from \"axios\";\n\n\nexport class ScopeCamera extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer(), \n      id: this.props.id\n    };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  getImage = (id) => {\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, media: space.data.media });\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .catch(error => console.log(error));\n  };\n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n  \n    camera.position.set(0, 0, -0.0001); //-0.001\n\n    renderer.domElement.className = \"scopehidden\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(-1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    \n    //Helper Geometry\n    var helperGeometry = new THREE.BoxBufferGeometry(100, 100, 100, 4, 4, 4);\n    var helperMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});\n    var helper = new THREE.Mesh(helperGeometry, helperMaterial);\n    //scene.add(helper);\n\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(this.state.media);\n    let group = CSS3elements (this.state.spaceRadius, this.state.media);\n    sceneCSS.add(group);\n\n    let scopeDiv = document.getElementById(\"scopecamdiv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(renderer.domElement);\n    scopeDiv.appendChild(renderer.domElement);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    //document.body.appendChild(rendererCSS.domElement);\n    scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    let id = this.state.id;\n    //console.log(\"FIRST ID \"+id)\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  componentDidUpdate = prevProps => {\n    if (this.props.id !== prevProps.id) {\n      let newId = this.props.id;\n      this.setState({ id: newId });\n      this.getImage(newId).then(() => {\n        this.init(this.state);\n        this.animate();\n      });\n    }\n  };\n\n  render() {\n    return <div id=\"scopecamdiv\"><Camera/></div>;\n  }\n}\n","import React from \"react\";\nimport axios from \"axios\";\n\nexport class UploadMediaVideo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: this.props.userInSession,\n      spaceID: this.props.currentSpace,\n      youtubeID: \"\"\n    };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(\"uploaded youtube video to this space\");\n    console.log(this.state.img_url);\n    this.createMedia(this.state.youtubeID);\n  }\n\n  handleChange = event => {\n    /* const { name, value } = event.target;\n    this.setState({ [name]: value }); */\n    console.log(event);\n    const value = event.target.value;\n    this.setState({ youtubeID: value }); \n  };\n\n  createMedia = youtubeID => {\n    let media = { url: youtubeID, type: \"YOUTUBE\" };\n    return this.service\n      .post(\"/media\", media)\n      .then(media => {\n        console.log(\"CREATED NEW YOUTUBE VIDEO:\");\n        console.log(media.data);\n        this.addMediaToSpace(media.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  addMediaToSpace = media => {\n    let spaceID = this.state.spaceID;\n    this.updateSpace(media, spaceID);\n  };\n\n  updateSpace = (media, spaceId) => {\n    let newMedia = media;\n    return this.service\n      .patch(`/spaces/${spaceId}`, newMedia)\n      .then(space => {\n        console.log(\"Space updated on DB \" + space.data);\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    return (\n      <div>\n        <form onSubmit={e => this.handleSubmit(e)}>\n          <input\n            type=\"text\"\n            name=\"youtubeID\"\n            onChange={e => this.handleChange(e)}\n            placeholder=\"VVsCOnWGHh8\"\n          />\n          <button type=\"submit\">Upload Media</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, NavbarMenu, NavbarItem } from \"bloomer\";\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n    this.getScopes();\n  }\n\n  getScopes = () => {\n    let catalogId = this.state.loggedInUser.catalog;\n    let promises = [];\n    this.setState({ catalogId: catalogId });\n    return this.service\n      .get(`/catalog/${catalogId}`)\n      .then(catalog => {\n        let spacesId = catalog.data.spaces;\n        spacesId.forEach(spaceId => {\n          promises.push(this.service.get(`/spaces/${spaceId}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let spaces = [];\n        promises.forEach(prom => {\n          spaces.push(prom.data);\n        });\n        this.setState({ userSpaces: spaces });\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    let userSpaces = this.state.userSpaces;\n\n    if (userSpaces) {\n      userSpaces.forEach(e => {\n      });\n      return (\n        <div>\n          <h1 className=\"profile-feed\">Profile</h1>\n          {userSpaces.map(space => {\n            return (\n              <div key={space._id} className=\"scope-in-feed\">\n                <Link to={`/scope/${space._id}`}>\n                    <img className=\"panorama-feed\"  height=\"50px\" src={space.image} />\n                </Link>\n              </div>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"profile-feed\">\n          <h1>Profile</h1>\n        </div>\n      );\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, NavbarMenu, NavbarItem } from \"bloomer\";\n\nexport default class BottomMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null };\n    //this.service = new AuthService();\n  }\n\n  render() {\n    return (\n      <Navbar>\n        <NavbarMenu>\n          <NavbarItem href='#/'>Home</NavbarItem>\n        </NavbarMenu>\n      </Navbar>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, NavbarMenu, NavbarItem } from \"bloomer\";\n\nexport default class ProfileID extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n    this.getScopes();\n  }\n\n  getScopes = () => {\n    let username = this.props.match.params.username;\n    let promises = [];\n    this.service.get(`auth/user/${username}`)\n      .then(user => {\n        let catalogId = user.data.catalog;\n        console.log(\"USER FROM DB TO PROFILE\");\n        console.log(user);\n        this.setState({ catalogId: catalogId });\n        return this.service.get(`/catalog/${catalogId}`);\n      })\n      .then(catalog => {\n        let spacesId = catalog.data.spaces;\n        spacesId.forEach(spaceId => {\n          promises.push(this.service.get(`/spaces/${spaceId}`));\n        });\n        return Promise.all(promises);\n      })\n      .then(promises => {\n        let spaces = [];\n        promises.forEach(prom => {\n          spaces.push(prom.data);\n        });\n        this.setState({ userSpaces: spaces });\n      })\n      .catch(error => console.log(error));\n  };\n\n  render() {\n    let userSpaces = this.state.userSpaces;\n\n    if (userSpaces) {\n      userSpaces.forEach(e => {});\n      return (\n        <div>\n          <h1 className=\"profile-feed\">Profile</h1>\n          {userSpaces.map(space => {\n            return (\n              <div key={space._id} className=\"scope-in-feed\">\n                <Link to={`/scope/${space._id}`}>\n                  <img\n                    className=\"panorama-feed\"\n                    height=\"50px\"\n                    src={space.image}\n                  />\n                </Link>\n              </div>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"profile-feed\">\n          <h1>Profile</h1>\n        </div>\n      );\n    }\n  }\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport DeviceOrientationControls from \"../../lib/DeviceOrientationControls\";\nimport CSS3DRenderer from \"../../lib/CSS3DRenderer\";\nimport {CSS3elements} from \"./CSS3elements\";\nimport axios from \"axios\";\n\n\nexport class ScopeID extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spaceRadius: 500,\n      camera: new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100),\n      scene: new THREE.Scene(),\n      sceneCSS: new THREE.Scene(), \n      renderer: new THREE.WebGLRenderer({ antialias: true }),\n      rendererCSS: new CSS3DRenderer()\n    };\n    this.service = axios.create({\n      baseURL: \"http://localhost:3010/api\"\n    });\n    console.log(\"COMPONENT SCOPE ID\")\n    console.log(this.props)\n  }\n\n  getImage = (id) => {\n    return this.service\n      .get(`/spaces/${id}`)\n      .then(space => {\n        this.setState({ image: space.data.image, media: space.data.media });\n        console.log(\"Image from DB \" + space.data.image);\n      })\n      .catch(error => console.log(error));\n  };\n\n  init = ({ camera, scene, renderer, sceneCSS, rendererCSS }) => {\n    this.setState({ controls: new DeviceOrientationControls(camera) });\n    camera.position.set(0, 0, -1000); //-0.001\n\n    renderer.domElement.className = \"scope\";\n    rendererCSS.domElement.className = \"scopeCSS\";\n    \n    //Panorama Sphere\n    var geometry = new THREE.SphereBufferGeometry(this.state.spaceRadius, 60, 40);\n    geometry.scale(1, 1, 1); // invert the geometry on the x-axis so that all of the faces point inward\n    const loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"\";\n    const map = loader.load(this.state.image);\n    var material = new THREE.MeshBasicMaterial({ map });\n    var sphere = new THREE.Mesh(geometry, material);\n    scene.add(sphere);\n    \n    //Helper Geometry\n    var helperGeometry = new THREE.BoxBufferGeometry(100, 100, 100, 4, 4, 4);\n    var helperMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, wireframe: true});\n    var helper = new THREE.Mesh(helperGeometry, helperMaterial);\n    //scene.add(helper);\n\n    console.log(\"MEDIA FROM THIS SPACE DB\");\n    console.log(this.state.media);\n    let group = CSS3elements (this.state.spaceRadius, this.state.media);\n    sceneCSS.add(group);\n\n    let scopeDiv = document.getElementById(\"scopediv\");\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    scopeDiv.appendChild(renderer.domElement);\n    //rendererCSS.setSize(window.innerWidth, window.innerHeight);\n    //scopeDiv.appendChild(rendererCSS.domElement);\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n  };\n\n  animate = () => {\n    let { camera, scene, renderer, sceneCSS, rendererCSS, controls } = this.state;\n    window.requestAnimationFrame(this.animate);\n    controls.update();\n    renderer.render(scene, camera);\n    rendererCSS.render(sceneCSS, camera);\n  };\n\n  onWindowResize = () => {\n    let { camera, renderer, rendererCSS } = this.state;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    rendererCSS.setSize(window.innerWidth, window.innerHeight);\n  };\n\n  componentDidMount = () => {\n    //let id = this.state.id;\n    console.log(this.props)\n    let id =  this.props.match.params.id\n    this.getImage(id).then(() => {\n      this.init(this.state);\n      this.animate();\n    });\n  };\n\n  /* componentDidUpdate = prevProps => {\n    if (this.props.id !== prevProps.id) {\n      let newId = this.props.match.params.id;\n      this.setState({ id: newId });\n      this.getImage(newId).then(() => {\n        this.init(this.state);\n        this.animate();\n      });\n    }\n  }; */\n\n  render() {\n      console.log(\"RENDER SCOPE ID\")\n      //console.log(this.props.match.params.id)\n    return <div id=\"scopediv\"/>;\n  }\n}\n","import React, { Component } from \"react\";\nimport { Switch, Route } from 'react-router-dom';\n\n//import \"bulma/css/bulma.css\";\nimport \"./App.scss\";\n\nimport Navbar from './components/Navbar';\nimport AuthService from \"./components/auth/AuthService\";\nimport Signup from './components/auth/Signup';\nimport Login from './components/auth/Login';\n\nimport { ScopeView } from \"./components/ScopeView\";\nimport { UploadSpace } from \"./components/upload/UploadSpace\";\nimport { UploadMediaImg} from \"./components/upload/UploadMediaImg\";\n//import Map from './components/maps/Map';\nimport { Camera } from \"./components/Camera\";\nimport { ScopeCamera } from \"./components/3dSpace/ScopeCamera\";\nimport { UploadMediaVideo } from \"./components/upload/UploadMediaVideo\";\nimport BottomMenu from \"./components/BottomMenu\";\nimport Profile from \"./components/Profile\";\nimport ProfileID from \"./components/ProfileID\";\nimport { ScopeID } from \"./components/3dSpace/ScopeID\";\nimport { Welcome } from \"./components/3dSpace/Welcome\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedInUser: null,\n      spaceId: \"5bc3313fdd315804e045a573\",\n      spaceLocation: {lat: 40.3923451, lng: -3.6985332999999994}\n    };\n    this.service = new AuthService();\n  }\n\n  getTheUser = userObj => {\n    this.setState({\n      loggedInUser: userObj\n    });\n  };\n\n  logout = () => {\n    this.service.logout().then(() => {\n      this.setState({ loggedInUser: null });\n    });\n  };\n\n  fetchUser() {\n    if (this.state.loggedInUser === null) {\n      this.service\n        .loggedin()\n        .then(response => {\n          this.setState({\n            loggedInUser: response\n          });\n        })\n        .catch(err => {\n          this.setState({\n            loggedInUser: false\n          });\n        });\n    }\n  }\n\n  actualizeSpace = (space, location) => {\n    this.setState({ spaceId: space, spaceLocation: location });\n  };\n\n  render() {\n    this.fetchUser();\n    return (\n      <div className=\"App\">\n        <header className=\"header\">\n          <Navbar userInSession={this.state.loggedInUser} logout={this.logout} />\n        </header>\n          <Switch>\n            <Route exact path='/signup' render={() => <Signup getUser={this.getTheUser}/>}/>\n            <Route exact path='/login' render={() => <Login getUser={this.getTheUser}/>}/>\n            <Route path='/profile/:username' render={(props) => <ProfileID {...props}/>}/>\n            <Route exact path='/profile' render={() => <Profile userInSession={this.state.loggedInUser}/>}/>\n            <Route path='/scope/:id' render={(props) => <ScopeID {...props}/>}/>\n            <Route exact path='/scope' render={() => <ScopeView id={this.state.spaceId}/>}/>\n            <Route exact path='/camera' render={() => <ScopeCamera id={this.state.spaceId}/>}/>\n            <Route exact path='/upload-scope' render={() => <UploadSpace newSpace={(space, location) => {this.actualizeSpace(space, location)}} userInSession={this.state.loggedInUser}/>}/>\n            <Route exact path='/upload-media-img' render={() => <UploadMediaImg userInSession={this.state.loggedInUser} currentSpace={this.state.spaceId}/>}/>\n            <Route exact path='/upload-media-video' render={() => <UploadMediaVideo userInSession={this.state.loggedInUser} currentSpace={this.state.spaceId}/>}/>\n          </Switch>\n        {/* <BottomMenu/> */}\n         {/*  <Welcome/> */}\n        {/* <Map id=\"myMap\" options={{center: this.state.spaceLocation, zoom: 8}} \n          onMapLoad={map => {\n            let marker = new window.google.maps.Marker({\n            position: this.state.spaceLocation, map: map,\n            title: 'Hello Istanbul!'\n            });\n          }} \n        />*/}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}