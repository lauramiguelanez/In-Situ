(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports=n.p+"static/media/scope white.7492596f.png"},106:function(e,t,n){e.exports=n(225)},199:function(e,t,n){},201:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(104),i=n.n(r),c=(n(197),n(199),n(4)),s=n(5),l=n(7),d=n(6),u=n(8),m=n(230),p=n(229),h=(n(201),n(24)),g=n(226),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleLogout=function(e){n.props.logout()},n.state={loggedInUser:null},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?o.a.createElement("nav",{className:"nav-style box",id:"top-nav"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{onClick:this.handleLogout},"Logout")),o.a.createElement("li",{className:"has-text-danger"},o.a.createElement(g.a,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/profile"},"@",this.state.loggedInUser.username)))):o.a.createElement("nav",{className:"nav-style box",id:"top-nav",role:"navigation","aria-label":"main navigation"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(g.a,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/signup"},"Signup")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/login"},"Login"))))}}]),t}(a.Component),f=n(13),w=n.n(f);n(23).config();var S=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentuser").then(function(e){return e.data}).catch(function(e){console.error("Error in getUser",e)})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api/auth"),withCredentials:!0})},E=n(34),b=n(228),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.signup(t,a).then(function(e){n.setState({username:"",password:"",redirect:!0}),n.props.getUser(e.user)}).catch(function(e){return console.log(e)})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(E.a)({},a,o))},n.state={username:"",password:"",redirect:!1},n.service=new S,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?o.a.createElement(b.a,{to:"/"}):o.a.createElement("div",{className:"card box"},o.a.createElement("h3",{class:"label is-medium"},"Welcome! create your account next:"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Username:"),o.a.createElement("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Password:"),o.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),o.a.createElement("input",{className:"button is-primary is-rounded",type:"submit",value:"Sign up"})))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then(function(e){n.setState({username:t,password:a,error:!1,redirect:!0}),n.props.getUser(e)}).catch(function(e){n.setState({username:t,password:a,error:!0})})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(E.a)({},a,o))},n.state={username:"",password:"",redirect:!1},n.service=new S,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?o.a.createElement(b.a,{to:"/"}):o.a.createElement("div",{className:"card box"},o.a.createElement("h3",{className:"label is-medium"},"Please, login"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Username:"),o.a.createElement("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Password:"),o.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),o.a.createElement("input",{className:"button is-primary is-rounded",type:"submit",value:"Login"})),o.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(a.Component),C=n(2),j=n(2);j.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n=function(e){t.deviceOrientation=e},a=function(){t.screenOrientation=window.orientation||0},o=function(){var e=new j.Vector3(0,0,1),t=new j.Euler,n=new j.Quaternion,a=new j.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,r,i,c,s){t.set(i,r,-c,"YXZ"),o.setFromEuler(t),o.multiply(a),o.multiply(n.setFromAxisAngle(e,-s))}}();this.connect=function(){a(),window.addEventListener("orientationchange",a,!1),window.addEventListener("deviceorientation",n,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",a,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){var e;if(!1!==t.enabled){var n=t.deviceOrientation;if(e=window.screen.width<=740?0:90,n){var a=n.alpha?j.Math.degToRad(n.alpha)+t.alphaOffset:0,r=n.beta?j.Math.degToRad(n.beta+e):j.Math.degToRad(e),i=n.gamma?j.Math.degToRad(n.gamma):0,c=t.screenOrientation?j.Math.degToRad(t.screenOrientation):0;o(t.object.quaternion,a,r,i,c)}}},this.dispose=function(){t.disconnect()},this.connect()};var I=j.DeviceOrientationControls,D=n(2);D.CSS3DRenderer=function(){var e,t,n,a;console.log("THREE.CSS3DRenderer",D.REVISION);var o=new D.Matrix4,r={camera:{fov:0,style:""},objects:new WeakMap},i=document.createElement("div");i.style.overflow="hidden",this.domElement=i;var c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",i.appendChild(c);var s=/Trident/i.test(navigator.userAgent);function l(e){return Math.abs(e)<1e-10?0:e}function d(e){var t=e.elements;return"matrix3d("+l(t[0])+","+l(-t[1])+","+l(t[2])+","+l(t[3])+","+l(t[4])+","+l(-t[5])+","+l(t[6])+","+l(t[7])+","+l(t[8])+","+l(-t[9])+","+l(t[10])+","+l(t[11])+","+l(t[12])+","+l(-t[13])+","+l(t[14])+","+l(t[15])+")"}function u(e,t){var o=e.elements,r="matrix3d("+l(o[0])+","+l(o[1])+","+l(o[2])+","+l(o[3])+","+l(-o[4])+","+l(-o[5])+","+l(-o[6])+","+l(-o[7])+","+l(o[8])+","+l(o[9])+","+l(o[10])+","+l(o[11])+","+l(o[12])+","+l(o[13])+","+l(o[14])+","+l(o[15])+")";return s?"translate(-50%,-50%)translate("+n+"px,"+a+"px)"+t+r:"translate(-50%,-50%)"+r}this.getSize=function(){return{width:e,height:t}},this.setSize=function(o,r){n=(e=o)/2,a=(t=r)/2,i.style.width=o+"px",i.style.height=r+"px",c.style.width=o+"px",c.style.height=r+"px"};var m=function(){var e=new D.Vector3,t=new D.Vector3;return function(n,a){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(a.matrixWorld),e.distanceToSquared(t)}}();function p(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof D.CSS3DObject&&t.push(e)}),t}(e).sort(function(e,t){return r.objects.get(e).distanceToCameraSquared-r.objects.get(t).distanceToCameraSquared}),n=t.length,a=0,o=t.length;a<o;a++)t[a].element.style.zIndex=n-a}this.render=function(e,t){var l=t.projectionMatrix.elements[5]*a;r.camera.fov!==l&&(t.isPerspectiveCamera&&(i.style.WebkitPerspective=l+"px",i.style.perspective=l+"px"),r.camera.fov=l),e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld();var h=t.isOrthographicCamera?"scale("+l+")"+d(t.matrixWorldInverse):"translateZ("+l+"px)"+d(t.matrixWorldInverse),g=h+"translate("+n+"px,"+a+"px)";r.camera.style===g||s||(c.style.WebkitTransform=g,c.style.transform=g,r.camera.style=g),function e(t,n,a){if(t instanceof D.CSS3DObject){var i;t instanceof D.CSS3DSprite?(o.copy(n.matrixWorldInverse),o.transpose(),o.copyPosition(t.matrixWorld),o.scale(t.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,i=u(o,a)):i=u(t.matrixWorld,a);var l=t.element,d=r.objects.get(t);if(void 0===d||d!==i){l.style.WebkitTransform=i,l.style.transform=i;var p={style:i};s&&(p.distanceToCameraSquared=m(n,t)),r.objects.set(t,p)}l.parentNode!==c&&c.appendChild(l)}for(var h=0,g=t.children.length;h<g;h++)e(t.children[h],n,a)}(e,t,h),s&&p(e)}};var N=D.CSS3DRenderer,M=n(2);(M=n(2)).CSS3DObject=function(e){M.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},M.CSS3DObject.prototype=Object.create(M.Object3D.prototype),M.CSS3DObject.prototype.constructor=M.CSS3DObject,M.CSS3DSprite=function(e){M.CSS3DObject.call(this,e)},M.CSS3DSprite.prototype=Object.create(M.CSS3DObject.prototype),M.CSS3DSprite.prototype.constructor=M.CSS3DSprite;var x=function(e,t,n,a,o){var r=document.createElement("div");r.style.width="".concat(200,"px"),r.style.backgroundColor="#000";var i=document.createElement("iframe");i.style.border="0px";var c=["https://www.youtube.com/embed/",e,"?rel=0"].join("");i.src=c,r.appendChild(i);var s=new M.CSS3DObject(r);return s.position.set(t,n,a),s.rotation.y=o,console.log(e),console.log(c),s},R=function(e,t,n,a,o){var r=document.createElement("div");r.style.backgroundColor="#000";var i=document.createElement("img");i.style.border="0px",i.src=e,i.style.width="".concat(200,"px"),i.style.height="auto",r.appendChild(i);var c=new M.CSS3DObject(r);return c.position.set(t,n,a),c.rotation.y=o,console.log(e),c},k=function(e,t){var n,a,o=e-50,r=t.length,i=2*Math.PI/r,c=new M.Group;return t.forEach(function(e,t){var r=i*t;n=o*Math.cos(r),a=o*Math.sin(r);var s=3*Math.PI/2-r;if("IMAGE"==e.type){var l=new R(e.url,n,0,a,s);c.add(l)}else if("YOUTUBE"==e.type){var d=new x(e.url,n,0,a,s);c.add(d)}else{var u=new x(e,n,0,a,s);c.add(u)}}),c};n(23).config();var T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getImage=function(e){return n.service.get("/spaces/".concat(e)).then(function(e){console.log("Image from DB "+e.data),n.setState({image:e.data.image,media:e.data.media})}).catch(function(e){return console.log(e)})},n.init=function(e){var t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS;n.setState({controls:new I(t)}),t.position.set(0,0,-1e-4),o.domElement.className="scope",i.domElement.className="scopeCSS";var c=new C.SphereBufferGeometry(n.state.spaceRadius,60,40);c.scale(-1,1,1);var s=new C.TextureLoader;s.crossOrigin="";var l=s.load(n.state.image),d=new C.MeshBasicMaterial({map:l}),u=new C.Mesh(c,d);a.add(u);var m=new C.BoxBufferGeometry(100,100,100,4,4,4),p=new C.MeshBasicMaterial({color:16711935,wireframe:!0});new C.Mesh(m,p);console.log("MEDIA FROM THIS SPACE DB"),console.log(n.state.media);var h=k(n.state.spaceRadius,n.state.media);r.add(h);var g=document.getElementById("scopediv");o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),g.appendChild(o.domElement),i.setSize(window.innerWidth,window.innerHeight),g.appendChild(i.domElement),window.addEventListener("resize",n.onWindowResize,!1)},n.animate=function(){var e=n.state,t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS,c=e.controls;window.requestAnimationFrame(n.animate),c.update(),o.render(a,t),i.render(r,t)},n.onWindowResize=function(){var e=n.state,t=e.camera,a=e.renderer,o=e.rendererCSS;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),o.setSize(window.innerWidth,window.innerHeight)},n.componentDidMount=function(){var e=n.state.id;n.getImage(e).then(function(){n.init(n.state),n.animate()})},n.componentDidUpdate=function(e){if(n.props.id!==e.id){var t=n.props.id;n.setState({id:t}),n.getImage(t).then(function(){n.init(n.state),n.animate()})}},n.state={spaceRadius:500,camera:new C.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100),scene:new C.Scene,sceneCSS:new C.Scene,renderer:new C.WebGLRenderer({antialias:!0}),rendererCSS:new N,id:n.props.id},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"scopediv"})}}]),t}(o.a.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"ScopeView"},o.a.createElement(T,{id:this.props.id}))}}]),t}(a.Component),L=function(){return new Promise(function(e,t){navigator.geolocation||t("No geolocation available"),navigator.geolocation.getCurrentPosition(function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e(n)},t)})};n(23).config();var U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).createSpace=function(e,t){t.lat,t.lng;console.log(t);var a=n.state.loggedInUser;console.log("USER IN CREATE SPACE"),console.log(a);var o={image:e,creator:a._id,location:t};return n.service.post("/spaces",o).then(function(e){console.log("CREATED NEW SPACE:"),console.log(e.data),n.sendNewSpace(e.data),n.addSpaceToUser(e.data)}).catch(function(e){return console.log(e)})},n.sendNewSpace=function(e){n.props.newSpace(e._id,e.location)},n.addSpaceToUser=function(e){var t=n.state.loggedInUser;console.log("ADD TO USER CATALOG"),console.log(e),console.log(t),n.updateCatalog(t.catalog,e._id)},n.updateCatalog=function(e,t){var a={spaceId:t};return n.service.patch("/catalog/".concat(e),a).then(function(e){console.log("Catalog updated on DB "+e.data)}).catch(function(e){return console.log(e)})},n.state={loggedInUser:n.props.userInSession,redirect:!1},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"handleChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.uploadImage(this.state.file).then(function(){console.log("uploaded image to create space"),console.log(t.state.img_url),L().then(function(e){console.log(e),t.createSpace(t.state.img_url,e)})})}},{key:"uploadImage",value:function(e){var t=this,n=new FormData;return n.append("photo",e),this.service.post("/uploadCloud",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.setState({img_url:e.data.secure_url,redirect:!0})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return this.state.redirect?o.a.createElement(b.a,{to:"/"}):o.a.createElement("div",{className:"form-card box"},o.a.createElement("div",{className:"file"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("label",{className:"file-label"},o.a.createElement("input",{className:"file-input",type:"file",onChange:function(t){return e.handleChange(t)}}),o.a.createElement("span",{className:"file-cta"},o.a.createElement("span",{className:"file-label"},"Take a panoramic photo"))),o.a.createElement("button",{className:"button is-primary",type:"submit"},"Upload"))))}}]),t}(o.a.Component);n(23).config();var W=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).createMedia=function(e){var t={url:e,type:"IMAGE"};return n.service.post("/media",t).then(function(e){console.log("CREATED NEW IMAGE:"),console.log(e.data),n.addMediaToSpace(e.data)}).catch(function(e){return console.log(e)})},n.addMediaToSpace=function(e){var t=n.state.spaceID;console.log("SPACE ID UPLOAD IMG "+t),n.updateSpace(e,t)},n.updateSpace=function(e,t){var a=e;return n.service.patch("/spaces/".concat(t),a).then(function(e){console.log("Space updated on DB "+e.data)}).catch(function(e){return console.log(e)})},n.state={loggedInUser:n.props.userInSession,spaceID:n.props.currentSpace,redirect:!1},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.uploadImage(this.state.file).then(function(){console.log("uploaded image to this space"),console.log(t.state.img_url),t.createMedia(t.state.img_url)})}},{key:"uploadImage",value:function(e){var t=this,n=new FormData;return n.append("photo",e),this.service.post("/uploadCloud",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.setState({img_url:e.data.secure_url,redirect:!0})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return console.log("SPACE ID UPLOAD IMG "+this.state.spaceID),this.state.redirect?o.a.createElement(b.a,{to:"/"}):o.a.createElement("div",{className:"form-card box"},o.a.createElement("div",{className:"file"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("label",{className:"file-label"},o.a.createElement("input",{className:"file-input",type:"file",onChange:function(t){return e.handleChange(t)}})," ",o.a.createElement("br",null),o.a.createElement("span",{className:"file-cta"},o.a.createElement("span",{className:"file-label"},"Add an image to this Scope"))),o.a.createElement("button",{type:"submit",className:"button is-primary"},"Upload"))))}}]),t}(o.a.Component),A=n(2);(A=n(2)).CSS3DObject=function(e){A.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},A.CSS3DObject.prototype=Object.create(A.Object3D.prototype),A.CSS3DObject.prototype.constructor=A.CSS3DObject,A.CSS3DSprite=function(e){A.CSS3DObject.call(this,e)},A.CSS3DSprite.prototype=Object.create(A.CSS3DObject.prototype),A.CSS3DSprite.prototype.constructor=A.CSS3DSprite;var z=function(e,t,n,a,o){var r=document.createElement("div");r.style.width="".concat(200,"px"),r.style.backgroundColor="#000";var i=document.createElement("iframe");i.style.border="0px";var c=["https://www.youtube.com/embed/",e,"?rel=0"].join("");i.src=c,r.appendChild(i);var s=new A.CSS3DObject(r);return s.position.set(t,n,a),s.rotation.y=o,s},H=function(e,t,n,a,o){var r=document.createElement("div");r.style.backgroundColor="#000";var i=document.createElement("img");i.style.border="0px",i.src=e,i.style.width="".concat(200,"px"),i.style.height="auto",r.appendChild(i);var c=new A.CSS3DObject(r);return c.position.set(t,n,a),c.rotation.y=o,c},B=function(e,t){console.log("MEDIA SEND TO CSS ELEMENTS"),console.log(t);var n,a,o=e-50,r=t.length,i=2*Math.PI/r,c=new A.Group;return t.forEach(function(e,t){var r=i*t;n=o*Math.cos(r),a=o*Math.sin(r);var s=3*Math.PI/2-r;if("IMAGE"==e.type){var l=new H(e.url,n,0,a,s);c.add(l)}else if("YOUTUBE"==e.type){var d=new z(e.url,n,0,a,s);c.add(d)}else{console.log(e);var u=new z(e,n,0,a,s);c.add(u)}}),c},V=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).cameraStart=function(){var t=document.querySelector("#camera--view");navigator.mediaDevices.getUserMedia(e.state.constraints).then(function(e){e.getTracks()[0];t.srcObject=e}).catch(function(e){console.error("Oops. Something is broken.",e)})},e.componentDidMount=function(){e.cameraStart()},e.state={cameraView:document.querySelector("#camera--view"),constraints:{video:{facingMode:"environment"},audio:!1}},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("video",{className:"camera",id:"camera--view",autoPlay:!0,playsInline:!0})}}]),t}(o.a.Component);n(23).config();var _=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getImage=function(e){return n.service.get("/spaces/".concat(e)).then(function(e){n.setState({image:e.data.image,media:e.data.media}),console.log("Image from DB "+e.data.image)}).catch(function(e){return console.log(e)})},n.init=function(e){var t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS;n.setState({controls:new I(t)}),t.position.set(0,0,-1e-4),o.domElement.className="scopehidden",i.domElement.className="scopeCSS";var c=new C.SphereBufferGeometry(n.state.spaceRadius,60,40);c.scale(-1,1,1);var s=new C.TextureLoader;s.crossOrigin="";var l=s.load(n.state.image),d=new C.MeshBasicMaterial({map:l}),u=new C.Mesh(c,d);a.add(u);var m,p=new C.BoxBufferGeometry(100,100,100,4,4,4),h=new C.MeshBasicMaterial({color:16711935,wireframe:!0}),g=(new C.Mesh(p,h),n.state.media);console.log("MEDIA FROM THIS SPACE DB"),console.log(g),void 0!=g&&(m=B(n.state.spaceRadius,g),console.log(m),r.add(m));var v=document.getElementById("scopecamdiv");o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(o.domElement),v.appendChild(o.domElement),i.setSize(window.innerWidth,window.innerHeight),v.appendChild(i.domElement),window.addEventListener("resize",n.onWindowResize,!1)},n.animate=function(){var e=n.state,t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS,c=e.controls;window.requestAnimationFrame(n.animate),c.update(),o.render(a,t),i.render(r,t)},n.onWindowResize=function(){var e=n.state,t=e.camera,a=e.renderer,o=e.rendererCSS;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),o.setSize(window.innerWidth,window.innerHeight)},n.componentDidMount=function(){var e=n.state.id;n.getImage(e).then(function(){n.init(n.state),n.animate()})},n.componentDidUpdate=function(e){if(n.props.id!==e.id){var t=n.props.id;n.setState({id:t}),n.getImage(t).then(function(){n.init(n.state),n.animate()})}},n.state={spaceRadius:500,camera:new C.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100),scene:new C.Scene,sceneCSS:new C.Scene,renderer:new C.WebGLRenderer({antialias:!0}),rendererCSS:new N,id:n.props.id},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"scopecamdiv"},o.a.createElement(V,null))}}]),t}(o.a.Component);n(23).config();var Y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getImage=function(e){var t=[];return n.service.get("/spaces/".concat(e)).then(function(e){n.setState({image:e.data.image,mediaIDs:e.data.media}),n.sendNewSpace(e.data),console.log("Image from DB "+e.data.image)}).then(function(){return n.state.mediaIDs.forEach(function(e){"object"==typeof e&&(e=e._id),t.push(n.service.get("/media/".concat(e)))}),Promise.all(t)}).then(function(e){var t=[];e.forEach(function(e){t.push(e.data)}),n.setState({media:t}),console.log("MEDIA OBJECTS IN STATE"),console.log(n.state.media)}).catch(function(e){return console.log(e)})},n.sendNewSpace=function(e){n.props.newSpace(e._id,e.location)},n.init=function(e){var t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS;n.setState({controls:new I(t)}),t.position.set(0,0,-1e-4),o.domElement.className="scopehidden",i.domElement.className="scopeCSS";var c=new C.SphereBufferGeometry(n.state.spaceRadius,60,40);c.scale(-1,1,1);var s=new C.TextureLoader;s.crossOrigin="";var l=s.load(n.state.image),d=new C.MeshBasicMaterial({map:l}),u=new C.Mesh(c,d);a.add(u);var m,p=n.state.media;console.log("MEDIA FROM THIS SPACE DB"),console.log(p),void 0!==p&&(m=B(n.state.spaceRadius,p),console.log(m),r.add(m));var h=document.getElementById("scopecamdiv");o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(o.domElement),h.appendChild(o.domElement),i.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(i.domElement),h.appendChild(i.domElement),window.addEventListener("resize",n.onWindowResize,!1)},n.animate=function(){var e=n.state,t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS,c=e.controls;window.requestAnimationFrame(n.animate),c.update(),o.render(a,t),i.render(r,t)},n.onWindowResize=function(){var e=n.state,t=e.camera,a=e.renderer,o=e.rendererCSS;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),o.setSize(window.innerWidth,window.innerHeight)},n.componentDidMount=function(){var e=n.props.match.params.id;n.setState({id:e}),n.getImage(e).then(function(){n.init(n.state),n.animate()})},n.state={spaceRadius:500,camera:new C.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100),scene:new C.Scene,sceneCSS:new C.Scene,renderer:new C.WebGLRenderer({antialias:!0}),rendererCSS:new N},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return console.log("id a route scope "+e),o.a.createElement("div",{id:"scopecamdiv"},o.a.createElement("button",{className:"button is-danger is-outlined is-rounded switch-button danger"},o.a.createElement(g.a,{to:"/scope/".concat(e)},"AR")),o.a.createElement(V,null))}}]),t}(o.a.Component);n(23).config();var F=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){console.log(e);var t=e.target.value;n.setState({youtubeID:t})},n.createMedia=function(e){var t={url:e,type:"YOUTUBE"};return n.service.post("/media",t).then(function(e){console.log("CREATED NEW YOUTUBE VIDEO:"),console.log(e.data),n.addMediaToSpace(e.data)}).catch(function(e){return console.log(e)})},n.addMediaToSpace=function(e){var t=n.state.spaceID;n.updateSpace(e,t)},n.updateSpace=function(e,t){var a=e;return n.service.patch("/spaces/".concat(t),a).then(function(e){console.log("Space updated on DB "+e.data)}).catch(function(e){return console.log(e)})},n.state={loggedInUser:n.props.userInSession,spaceID:n.props.currentSpace,youtubeID:"",redirect:!1},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("uploaded youtube video to this space"),console.log(this.state.img_url),this.createMedia(this.state.youtubeID),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;return console.log("SPACE ID UPLOAD VIDEO "+this.state.spaceID),this.state.redirect?o.a.createElement(b.a,{to:"/"}):o.a.createElement("div",{className:"form-card box"},o.a.createElement("div",{class:"field"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("label",{class:"label"},"Add a YouTube video to this Scope"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{className:"input is-primary",type:"text",name:"youtubeID",onChange:function(t){return e.handleChange(t)},placeholder:"VVsCOnWGHh8"})),o.a.createElement("button",{className:"button is-primary",type:"submit"},"Upload"))))}}]),t}(o.a.Component),G=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={loggedInUser:null},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return o.a.createElement("nav",{className:"nav-style box",id:"bottom-nav"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(g.a,{to:"/upload-media-img"},"+Image")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/upload-scope/"},"New")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/upload-media-video"},"+Video"))))}}]),t}(a.Component);n(103);n(23).config();var q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getScopes=function(){var e=n.props.userInSession.catalog,t=[];return n.setState({catalogId:e}),n.service.get("/catalog/".concat(e)).then(function(e){return e.data.spaces.forEach(function(e){t.push(n.service.get("/spaces/".concat(e)))}),Promise.all(t)}).then(function(e){var t=[];e.forEach(function(e){t.push(e.data)}),n.setState({userSpaces:t})}).catch(function(e){return console.log(e)})},n.state={loggedInUser:e.userInSession},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n.getScopes(),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){if(this.props.userInSession){var e=this.state.userSpaces;return e?(e.forEach(function(e){}),o.a.createElement("div",{className:"profile-feed"},e.map(function(e){return o.a.createElement("div",{key:e._id,className:"scope-in-feed"},o.a.createElement(g.a,{to:"/scope/".concat(e._id)},o.a.createElement("img",{className:"panorama-feed",height:"50px",src:e.image})))}))):o.a.createElement("div",{className:"profile-feed"})}return o.a.createElement("div",null)}}]),t}(a.Component);n(23).config();var X=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getScopes=function(){var e=n.props.match.params.username;console.log(e);var t=[];n.service.get("auth/user/".concat(e)).then(function(e){console.log("USER FROM DB TO PROFILE"),console.log(e);var t=e.data.catalog;return n.setState({catalogId:t}),n.service.get("/catalog/".concat(t))}).then(function(e){return e.data.spaces.forEach(function(e){t.push(n.service.get("/spaces/".concat(e)))}),Promise.all(t)}).then(function(e){var t=[];e.forEach(function(e){t.push(e.data)}),n.setState({userSpaces:t})}).catch(function(e){return console.log(e)})},n.state={},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession})),this.getScopes()}},{key:"render",value:function(){var e=this.state.userSpaces;return e?(e.forEach(function(e){}),o.a.createElement("div",{className:"profile-feed"},e.map(function(e){return o.a.createElement("div",{key:e._id,className:"scope-in-feed"},o.a.createElement(g.a,{to:"/scope/".concat(e._id)},o.a.createElement("img",{className:"panorama-feed",height:"50px",src:e.image})))}))):o.a.createElement("div",{className:"profile-feed"},o.a.createElement("h1",null,"No profile"))}}]),t}(a.Component),Z=n(2);Z.TrackballControls=function(e,t){var n=this,a={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new Z.Vector3;var o=new Z.Vector3,r=a.NONE,i=a.NONE,c=new Z.Vector3,s=new Z.Vector2,l=new Z.Vector2,d=new Z.Vector3,u=0,m=new Z.Vector2,p=new Z.Vector2,h=0,g=0,v=new Z.Vector2,f=new Z.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var w={type:"change"},S={type:"start"},E={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}};var b=function(){var e=new Z.Vector2;return function(t,a){return e.set((t-n.screen.left)/n.screen.width,(a-n.screen.top)/n.screen.height),e}}(),y=function(){var e=new Z.Vector2;return function(t,a){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-a))/n.screen.width),e}}();function O(e){!1!==n.enabled&&(window.removeEventListener("keydown",O),i=r,r===a.NONE&&(e.keyCode!==n.keys[a.ROTATE]||n.noRotate?e.keyCode!==n.keys[a.ZOOM]||n.noZoom?e.keyCode!==n.keys[a.PAN]||n.noPan||(r=a.PAN):r=a.ZOOM:r=a.ROTATE))}function C(e){!1!==n.enabled&&(r=i,window.addEventListener("keydown",O,!1))}function j(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),r===a.NONE&&(r=e.button),r!==a.ROTATE||n.noRotate?r!==a.ZOOM||n.noZoom?r!==a.PAN||n.noPan||(v.copy(b(e.pageX,e.pageY)),f.copy(v)):(m.copy(b(e.pageX,e.pageY)),p.copy(m)):(l.copy(y(e.pageX,e.pageY)),s.copy(l)),document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",D,!1),n.dispatchEvent(S))}function I(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),r!==a.ROTATE||n.noRotate?r!==a.ZOOM||n.noZoom?r!==a.PAN||n.noPan||f.copy(b(e.pageX,e.pageY)):p.copy(b(e.pageX,e.pageY)):(s.copy(l),l.copy(y(e.pageX,e.pageY))))}function D(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),r=a.NONE,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",D),n.dispatchEvent(E))}function N(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:m.y-=.025*e.deltaY;break;case 1:m.y-=.01*e.deltaY;break;default:m.y-=25e-5*e.deltaY}n.dispatchEvent(S),n.dispatchEvent(E)}}function M(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:r=a.TOUCH_ROTATE,l.copy(y(e.touches[0].pageX,e.touches[0].pageY)),s.copy(l);break;default:r=a.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;g=h=Math.sqrt(t*t+o*o);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(b(i,c)),f.copy(v)}n.dispatchEvent(S)}}function x(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:s.copy(l),l.copy(y(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY;g=Math.sqrt(t*t+a*a);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,r=(e.touches[0].pageY+e.touches[1].pageY)/2;f.copy(b(o,r))}}function R(e){if(!1!==n.enabled){switch(e.touches.length){case 0:r=a.NONE;break;case 1:r=a.TOUCH_ROTATE,l.copy(y(e.touches[0].pageX,e.touches[0].pageY)),s.copy(l)}n.dispatchEvent(E)}}function k(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new Z.Vector3,a=new Z.Quaternion,o=new Z.Vector3,r=new Z.Vector3,i=new Z.Vector3,m=new Z.Vector3;return function(){m.set(l.x-s.x,l.y-s.y,0),(e=m.length())?(c.copy(n.object.position).sub(n.target),o.copy(c).normalize(),r.copy(n.object.up).normalize(),i.crossVectors(r,o).normalize(),r.setLength(l.y-s.y),i.setLength(l.x-s.x),m.copy(r.add(i)),t.crossVectors(m,c).normalize(),e*=n.rotateSpeed,a.setFromAxisAngle(t,e),c.applyQuaternion(a),n.object.up.applyQuaternion(a),d.copy(t),u=e):!n.staticMoving&&u&&(u*=Math.sqrt(1-n.dynamicDampingFactor),c.copy(n.object.position).sub(n.target),a.setFromAxisAngle(d,u),c.applyQuaternion(a),n.object.up.applyQuaternion(a)),s.copy(l)}}(),this.zoomCamera=function(){var e;r===a.TOUCH_ZOOM_PAN?(e=h/g,h=g,c.multiplyScalar(e)):(1!==(e=1+(p.y-m.y)*n.zoomSpeed)&&e>0&&c.multiplyScalar(e),n.staticMoving?m.copy(p):m.y+=(p.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new Z.Vector2,t=new Z.Vector3,a=new Z.Vector3;return function(){e.copy(f).sub(v),e.lengthSq()&&(e.multiplyScalar(c.length()*n.panSpeed),a.copy(c).cross(n.object.up).setLength(e.x),a.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(a),n.target.add(a),n.staticMoving?v.copy(f):v.add(e.subVectors(f,v).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(c.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,c.setLength(n.maxDistance)),m.copy(p)),c.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,c.setLength(n.minDistance)),m.copy(p)))},this.update=function(){c.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,c),n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(w),o.copy(n.object.position))},this.reset=function(){r=a.NONE,i=a.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),c.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(w),o.copy(n.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",k,!1),this.domElement.removeEventListener("mousedown",j,!1),this.domElement.removeEventListener("wheel",N,!1),this.domElement.removeEventListener("touchstart",M,!1),this.domElement.removeEventListener("touchend",R,!1),this.domElement.removeEventListener("touchmove",x,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",D,!1),window.removeEventListener("keydown",O,!1),window.removeEventListener("keyup",C,!1)},this.domElement.addEventListener("contextmenu",k,!1),this.domElement.addEventListener("mousedown",j,!1),this.domElement.addEventListener("wheel",N,!1),this.domElement.addEventListener("touchstart",M,!1),this.domElement.addEventListener("touchend",R,!1),this.domElement.addEventListener("touchmove",x,!1),window.addEventListener("keydown",O,!1),window.addEventListener("keyup",C,!1),this.handleResize(),this.update()},Z.TrackballControls.prototype=Object.create(Z.EventDispatcher.prototype),Z.TrackballControls.prototype.constructor=Z.TrackballControls;Z.TrackballControls;n(23).config();var Q,J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).getImage=function(e){var t=[];return n.service.get("/spaces/".concat(e)).then(function(e){n.setState({image:e.data.image,mediaIDs:e.data.media}),n.sendNewSpace(e.data),console.log("Image from DB "+e.data.image)}).then(function(){return n.state.mediaIDs.forEach(function(e){"object"==typeof e&&(e=e._id),t.push(n.service.get("/media/".concat(e)))}),Promise.all(t)}).then(function(e){var t=[];e.forEach(function(e){t.push(e.data)}),n.setState({media:t}),console.log("MEDIA OBJECTS IN STATE"),console.log(n.state.media)}).catch(function(e){return console.log(e)})},n.sendNewSpace=function(e){n.props.newSpace(e._id,e.location)},n.init=function(e){var t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS;n.setState({controls:new I(t)}),t.position.set(0,0,-.001),o.domElement.className="scope",i.domElement.className="scopeCSS";var c=new C.SphereBufferGeometry(n.state.spaceRadius,60,40);c.scale(-1,1,1);var s=new C.TextureLoader;s.crossOrigin="";var l=s.load(n.state.image),d=new C.MeshBasicMaterial({map:l}),u=new C.Mesh(c,d);a.add(u);var m,p=n.state.media;console.log("MEDIA FROM THIS SPACE DB"),console.log(p),void 0!==p&&(m=B(n.state.spaceRadius,p),console.log(m),r.add(m));var h=document.getElementById("scopediv");o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),h.appendChild(o.domElement),i.setSize(window.innerWidth,window.innerHeight),h.appendChild(i.domElement),window.addEventListener("resize",n.onWindowResize,!1)},n.animate=function(){var e=n.state,t=e.camera,a=e.scene,o=e.renderer,r=e.sceneCSS,i=e.rendererCSS,c=e.controls;window.requestAnimationFrame(n.animate),c.update(),o.render(a,t),i.render(r,t)},n.onWindowResize=function(){var e=n.state,t=e.camera,a=e.renderer,o=e.rendererCSS;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),o.setSize(window.innerWidth,window.innerHeight)},n.componentDidMount=function(){var e=n.props.match.params.id;L().then(function(e){console.log(e),n.setState({currrentLocation:e})}),n.getImage(e).then(function(){n.init(n.state),n.animate()})},n.state={spaceRadius:500,camera:new C.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100),scene:new C.Scene,sceneCSS:new C.Scene,renderer:new C.WebGLRenderer({antialias:!0}),rendererCSS:new N,isInLocation:!1},n.service=w.a.create({baseURL:"".concat("https://in-situ.herokuapp.com","/api")}),console.log("COMPONENT SCOPE ID"),console.log(n.props),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return o.a.createElement("div",{id:"scopediv"},o.a.createElement("button",{className:"button is-white is-outlined is-rounded switch-button white"},o.a.createElement(g.a,{to:"/camera/".concat(e)},"AR")))}}]),t}(o.a.Component),$=n(105),K=n.n($),ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).init=function(e){var t=e.camera,a=e.scene,o=e.renderer;t.position.set(0,0,-100),o.domElement.className="welcome";var r=new C.SphereBufferGeometry(n.state.spaceRadius,100,40);r.scale(-1,1,1);var i=new C.MeshBasicMaterial({color:16777215,wireframe:!0,wireframeLinewidth:10});Q=new C.Mesh(r,i),a.add(Q),a.background=new C.Color(53682);var c=document.getElementById("welcome");o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),c.appendChild(o.domElement),window.addEventListener("resize",n.onWindowResize,!1)},n.animate=function(){var e=n.state,t=e.camera,a=e.scene,o=e.renderer;window.requestAnimationFrame(n.animate),Q.rotation.x+=.0015,Q.rotation.y+=.001,Q.rotation.z+=4e-4,o.render(a,t)},n.onWindowResize=function(){var e=n.state,t=e.camera,a=e.renderer;t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)},n.componentDidMount=function(){n.init(n.state),n.animate()},n.state={spaceRadius:500,camera:new C.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100),scene:new C.Scene,renderer:new C.WebGLRenderer({antialias:!0})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("img",{src:K.a,className:"logo"}),o.a.createElement("div",{id:"welcome",className:"welcome"}))}}]),t}(o.a.Component),te=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).getTheUser=function(t){e.setState({loggedInUser:t})},e.logout=function(){e.service.logout().then(function(){e.setState({loggedInUser:null})})},e.actualizeSpace=function(t,n){e.setState({spaceId:t,spaceLocation:n})},e.state={loggedInUser:null,spaceId:"5bc3313fdd315804e045a573",spaceLocation:{lat:40.3923451,lng:-3.6985332999999994}},e.service=new S,e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return console.log("SPACE ID STATE!!!!!!!!"),console.log(this.state.spaceId),this.fetchUser(),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"header"},o.a.createElement(v,{userInSession:this.state.loggedInUser,logout:this.logout})),o.a.createElement("div",{className:"fix-top"}),o.a.createElement("main",null,o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/",render:function(){return o.a.createElement(ee,null)}}),o.a.createElement(p.a,{exact:!0,path:"/signup",render:function(){return o.a.createElement(y,{getUser:e.getTheUser})}}),o.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return o.a.createElement(O,{getUser:e.getTheUser})}}),o.a.createElement(p.a,{path:"/profile/:username",render:function(e){return o.a.createElement(X,e)}}),o.a.createElement(p.a,{exact:!0,path:"/profile",render:function(){return o.a.createElement(q,{userInSession:e.state.loggedInUser})}}),o.a.createElement(p.a,{path:"/scope/:id",render:function(t){return o.a.createElement(J,Object.assign({newSpace:function(t,n){e.actualizeSpace(t,n)}},t))},newSpace:function(t,n){e.actualizeSpace(t,n)}}),o.a.createElement(p.a,{exact:!0,path:"/scope",render:function(){return o.a.createElement(P,{id:e.state.spaceId})}}),o.a.createElement(p.a,{exact:!0,path:"/camera/:id",render:function(t){return o.a.createElement(Y,Object.assign({newSpace:function(t,n){e.actualizeSpace(t,n)}},t))}}),o.a.createElement(p.a,{exact:!0,path:"/camera",render:function(){return o.a.createElement(_,{id:e.state.spaceId})}}),o.a.createElement(p.a,{exact:!0,path:"/upload-scope",render:function(){return o.a.createElement(U,{newSpace:function(t,n){e.actualizeSpace(t,n)},userInSession:e.state.loggedInUser})}}),o.a.createElement(p.a,{exact:!0,path:"/upload-media-img",render:function(){return o.a.createElement(W,{userInSession:e.state.loggedInUser,currentSpace:e.state.spaceId})}}),o.a.createElement(p.a,{exact:!0,path:"/upload-media-video",render:function(){return o.a.createElement(F,{userInSession:e.state.loggedInUser,currentSpace:e.state.spaceId})}}))),o.a.createElement("div",{className:"fix-bottom"}),o.a.createElement("footer",null,o.a.createElement(G,{userInSession:this.state.loggedInUser})))}}]),t}(a.Component),ne=n(227);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ne.a,null,o.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.83df9451.chunk.js.map